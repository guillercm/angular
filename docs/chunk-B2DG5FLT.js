import{a as xe,b as F,c as ye,d as Te,f as we,g as Le,h as Ge,i as Re,k as Q}from"./chunk-LKWVCNZG.js";import{a as D,b as ve}from"./chunk-HQ6BEVK7.js";import{e as Fe}from"./chunk-VGIZYUEZ.js";import"./chunk-GTJUILT2.js";import"./chunk-KP3CEOU7.js";import{$b as J,Ac as T,Ba as le,Bc as w,Cc as fe,Da as E,Db as g,Dd as O,Ec as _e,Gc as Ce,Hc as ge,Ia as se,Ja as x,Jb as c,Ka as a,L as ie,Lc as Y,Ma as ce,Na as R,Q as re,Tb as N,Ub as m,Wb as de,Yb as p,Yc as f,Zb as pe,_b as ue,ac as Z,bc as d,cc as u,da as ae,dc as h,ec as y,f as oe,fc as M,hc as k,ic as s,ka as C,md as A,pb as l,pc as z,pd as he,qc as j,rc as W,sc as I,tc as B,uc as X,va as L,wa as G,wb as S,xb as H,xd as be,yb as me,zc as b}from"./chunk-MHIS6V2U.js";import{a as ne}from"./chunk-75BJGDCN.js";function De(n,r){if(n&1&&h(0,"i",1),n&2){let e=s();m("ngClass","fs-"+e.fontSizeIcon()+" bi bi-"+e.icon())}}var qe=["container"];function Ne(n,r){n&1&&y(0)}function Me(n,r){if(n&1&&c(0,Ne,1,0,"ng-container",2),n&2){let e=s().$implicit,t=w(0),o=s();m("ngTemplateOutlet",t)("ngTemplateOutletContext",o.getDataForTemplateContext(e))}}function ze(n,r){if(n&1&&(b(0),c(1,Me,1,2,"ng-container")),n&2){let e=r.$implicit,t=T(s().templates()[e]);l(),p(t?1:-1)}}function je(n,r){n&1&&y(0)}function Be(n,r){if(n&1&&c(0,je,1,0,"ng-container",2),n&2){s();let e=w(1),t=s();m("ngTemplateOutlet",e)("ngTemplateOutletContext",t.getDataForTemplateContext())}}function Ae(n,r){n&1&&y(0)}function Qe(n,r){if(n&1&&c(0,Ae,1,0,"ng-container",2),n&2){let e=s().$implicit,t=w(0),o=s(2);m("ngTemplateOutlet",t)("ngTemplateOutletContext",o.getDataForTemplateContext(e))}}function $e(n,r){n&1&&y(0)}function Pe(n,r){if(n&1&&c(0,$e,1,0,"ng-container",2),n&2){let e=s().$implicit,t=w(3),o=s(2);m("ngTemplateOutlet",t)("ngTemplateOutletContext",o.getDataForTemplateContext(e))}}function Ue(n,r){if(n&1&&(b(0),c(1,Qe,1,2,"ng-container"),h(2,"lib-grcm-control",4),b(3),c(4,Pe,1,2,"ng-container")),n&2){let e=r.$implicit,t=s(2),o=T(t.templates()["before_"+e]);l(),p(o?1:-1),l(),m("formControlName",e),l();let i=T(t.templates()["after_"+e]);l(),p(i?4:-1)}}function Ke(n,r){n&1&&y(0)}function He(n,r){if(n&1&&c(0,Ke,1,0,"ng-container",2),n&2){s();let e=w(5),t=s();m("ngTemplateOutlet",e)("ngTemplateOutletContext",t.getDataForTemplateContext())}}function Je(n,r){if(n&1){let e=M();d(0,"form",3),k("ngSubmit",function(){L(e);let o=s();return G(o.onSubmit())}),b(1),c(2,Be,1,2,"ng-container"),J(3,Ue,5,5,null,null,ue),b(5),c(6,He,1,2,"ng-container"),u()}if(n&2){let e=s(),t=w(2);m("formGroup",t)("ngClass",e.additionalClasses()),l();let o=T(e.templates().beforeFormTemplate);l(),p(o?2:-1),l(),Z(e.formControlNames()),l(2);let i=T(e.templates().afterFormTemplate);l(),p(i?6:-1)}}var Ze=["controlView"];function We(n,r){if(n&1&&(d(0,"p"),I(1),u(),h(2,"p")),n&2){let e=s(),t=w(0);l(),B(e.getError(t))}}function Xe(n,r){if(n&1&&(d(0,"span",1),h(1,"i",3),u()),n&2){let e=s(2);l(),m("ngClass","bi bi-"+e.icon())}}function Ye(n,r){if(n&1){let e=M();c(0,Xe,2,1,"span",1),b(1)(2)(3)(4),d(5,"input",2,0),k("input",function(){L(e);let o=W(6),i=s();return G(i.change(o.value))})("blur",function(){L(e);let o=s();return G(o.onBlur())}),u()}if(n&2){let e=s();p(e.icon()?0:-1);let t=e.control().validator,o=e.control().valid,i=e.control().invalid,_=e.control().touched;l(5),de("is-valid",t&&o&&_)("is-invalid",t&&i&&_),m("type",e.type())("placeholder",e.placeholder())("value",e.value())("id",e.id())("ngClass",e.additionalClasses()),N("disabled",e.disabled()?"disabled":null)("autocomplete",e.autocomplete()?"on":"off")}}var et=n=>({afterFormTemplate:n});function tt(n,r){if(n&1&&(d(0,"p"),I(1),u(),h(2,"p")),n&2){let e=r.$implicit;l(),X("",e," ")}}function nt(n,r){if(n&1&&J(0,tt,3,1,null,null,pe),n&2){let e=s().form,t=s();Z(t.getErrors(e))}}function ot(n,r){if(n&1&&(d(0,"div",3),c(1,nt,2,0),u(),h(2,"lib-grcm-button",4)),n&2){let e=r.form;l(),p(e.errors?1:-1),l(),m("disabled",e.invalid)}}function it(n,r){if(n&1&&(d(0,"div",2)(1,"p"),I(2,"Respuesta del formulario"),u(),d(3,"div",5)(4,"pre")(5,"code",6),I(6),Ce(7,"json"),u()()()()),n&2){let e=s();l(6),B(ge(7,1,e.responseForm()))}}var rt=(()=>{class n{label=a("");title=a("");disabled=a(!1);link=a(null);type=a("button");variant=a("primary");outline=a(!1);size=a("default");additionalClasses=a("");icon=a("");fontSizeIcon=a(6);clicked=x();classes=f(()=>`w-100 btn btn-${(this.outline()?"outline-":"")+this.variant()+(this.size()?` btn-${this.size()} `:" ")+this.additionalClasses()}`);click(){this.clicked.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=g({type:n,selectors:[["lib-grcm-button"]],inputs:{label:[1,"label"],title:[1,"title"],disabled:[1,"disabled"],link:[1,"link"],type:[1,"type"],variant:[1,"variant"],outline:[1,"outline"],size:[1,"size"],additionalClasses:[1,"additionalClasses"],icon:[1,"icon"],fontSizeIcon:[1,"fontSizeIcon"]},outputs:{clicked:"clicked"},decls:3,vars:7,consts:[[3,"click","type","title","ngClass","routerLink"],[3,"ngClass"]],template:function(t,o){t&1&&(d(0,"button",0),k("click",function(){return o.click()}),c(1,De,1,1,"i",1),I(2),u()),t&2&&(m("type",o.type())("title",o.title())("ngClass",o.classes())("routerLink",o.link()),N("disabled",o.disabled()?"disabled":null),l(),p(o.icon()?1:-1),l(),X(" ",o.label(),`
`))},dependencies:[O,A,Fe],encapsulation:2})}return n})();var $=(()=>{class n{_injector=C(le);_destroyRef=C(E);_container=H("container",{read:S});_grcmFormComponent=C(P);formControlName=a.required();_componentRef;_componentRefFormField;_componentInstance=f(()=>this._componentRef?.instance);id=f(()=>this._grcmFormComponent.identifier()+"_"+this.formControlName());_form=f(()=>this._grcmFormComponent.form());_data=f(()=>this._grcmFormComponent.data().controls[this.formControlName()]);control=f(()=>this._form()?.controls[this.formControlName()]);ngOnInit(){this.initialize()}initialize(){this.createComponents(),this.setInputsOutputs(),this.setClasses()}createComponents(){let{component:e,formFieldComponent:t}=this._data(),o=this._container();if(!t||!o)return;this._componentRefFormField=o.createComponent(t),this._componentRefFormField.setInput("control",this.control()),this._componentRefFormField.setInput("id",this.id());let i=this._componentRefFormField.instance;this._componentRef=i.controlView().createComponent(e)}setInputsOutputs(){let e=this._data().args;if(!e)return;let{control:t={},formField:o={}}=e,i=this._componentRef,_=this._componentRefFormField,v=(te,U)=>{Object.keys(te).forEach(q=>{let V=te[q],K=U.instance[q];switch(typeof K){case"function":if(ce(V)){let Ee=ve(V,{injector:this._injector}).subscribe(()=>U.setInput(q,V()));this._destroyRef.onDestroy(()=>Ee.unsubscribe())}else U.setInput(q,V);break;case"object":if(!(K instanceof se))return;let Ve=K.subscribe(V);this._destroyRef.onDestroy(()=>Ve.unsubscribe())}})};v(t,i),v(o,_)}setClasses(){let e=this._data().classes;if(!e)return;let{control:t,formField:o}=e;t&&(this._componentRef.location.nativeElement.classList=t),o&&(this._componentRefFormField.location.nativeElement.classList=o)}writeValue(e){this._componentInstance().writeValue(e)}registerOnChange(e){this._componentInstance().registerOnChange(e)}registerOnTouched(e){this._componentInstance().registerOnTouched(e)}setDisabledState(e){this._componentInstance()?.setDisabledState?.(e)}ngOnDestroy(){this._componentRef.destroy(),this._componentRefFormField.destroy(),this._container()?.clear()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=g({type:n,selectors:[["lib-grcm-control"]],viewQuery:function(t,o){t&1&&z(o._container,qe,5,S),t&2&&j()},hostVars:1,hostBindings:function(t,o){t&2&&N("data-control-id",o.id())},inputs:{formControlName:[1,"formControlName"]},features:[fe([{provide:xe,useExisting:ae(()=>n),multi:!0}])],decls:2,vars:0,consts:[["container",""]],template:function(t,o){t&1&&y(0,null,0)},dependencies:[O,Q],encapsulation:2})}return n})(),P=(()=>{class n{grcmControls=me($,{read:S});_destroyRef=C(E);_formBuilder=C(Re);data=a.required();additionalClasses=a();buildForm=x();formSubmit=x();formChange=x();_form=R(null);form=this._form.asReadonly();formKeys=[];templates=a({});identifier=f(()=>this.data().form.id);formControlNames=f(()=>Object.keys(this._form()?.controls||{}));ngOnInit(){this.initialize()}ngAfterViewInit(){this.buildForm.emit(this.form())}initialize(){this.initForm(),this.initSubscriptionsForControlValueChanges()}initForm(){let e=this.data();this._form.set(this._formBuilder.record({},{validators:e.form.validators,asyncValidators:e.form.asyncValidators,updateOn:e.form.updateOn||"change"})),Object.keys(e.controls).forEach(t=>{let o=e.controls[t];this.addControl(t,o)})}addControl(e,t){this._form()?.addControl(e,this._formBuilder.control(t.value,[...t.validators||[]],[...t.asyncValidators||[]]))}initSubscriptionsForControlValueChanges(){let e=this.form();e&&this.formControlNames().forEach(t=>{this.data().controls[t].valueChangesSubscribe&&e.controls[t].valueChanges.pipe(re(),D(this._destroyRef)).subscribe(o=>{this.formChange.emit({field:t,newValue:o})})})}getErrors(e){return e?Object.keys(e):[]}onSubmit(){let e=this.form();this.markAsTouched(),!(!e||e.invalid)&&e.valid&&this.formSubmit.emit({form:e})}markAsTouched(){let e=this.form();e?.markAsTouched(),e?.updateValueAndValidity()}getDataForTemplateContext(e=null){let t=this.form();if(!t)return{};let o={form:t};return e&&(o.control=t.controls[e]),o}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=g({type:n,selectors:[["lib-grcm-form"]],viewQuery:function(t,o){t&1&&z(o.grcmControls,$,5,S),t&2&&j()},inputs:{data:[1,"data"],additionalClasses:[1,"additionalClasses"],templates:[1,"templates"]},outputs:{buildForm:"buildForm",formSubmit:"formSubmit",formChange:"formChange"},decls:4,vars:2,consts:[["renderTemplate",""],["novalidate","",3,"formGroup","ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["novalidate","",3,"ngSubmit","formGroup","ngClass"],[3,"formControlName"]],template:function(t,o){if(t&1&&(c(0,ze,2,2,"ng-template",null,0,Y),b(2),c(3,Je,7,6,"form",1)),t&2){l(2);let i=T(o.form());l(),p(i?3:-1)}},dependencies:[O,A,he,Q,we,ye,Te,Le,Ge,$],encapsulation:2})}return n})(),Se=(()=>{class n{_destroyRef=C(E);controlView=H.required("controlView",{read:S});control=a.required();id=a.required();_formComponent=C(P);label=a("");_isRequired=R(!1);isRequired=this._isRequired.asReadonly();_useCompleteLabel=R(!1);useCompleteLabel=this._useCompleteLabel.asReadonly();requiredTag="*";optionalTag="(Opcional)";form=f(()=>this._formComponent.form());completeLabel=f(()=>this.label()+(this.useCompleteLabel()?this.isRequired()?this.requiredTag:this.optionalTag:""));ngOnInit(){this.initialize()}initialize(){this.setIsRequired(),this.initControlStatusChanges(),this.initFormStatusChanges()}initControlStatusChanges(){this.control().statusChanges.pipe(D(this._destroyRef)).subscribe(()=>{this.setIsRequired()})}initFormStatusChanges(){let e=this._formComponent.form();e&&(this.setUseCompleteLabel(e),e.statusChanges.pipe(D(this._destroyRef)).subscribe(()=>{this.setUseCompleteLabel(e)}))}setUseCompleteLabel(e){let t=0,o=Object.keys(e.controls);o.forEach(_=>{this.controlIsRequired(e.controls[_])&&t++});let i=o.length/2;this.isRequired()&&t<=i?this._useCompleteLabel.set(!0):this._useCompleteLabel.set(!this.isRequired()&&t>i)}setIsRequired(){this._isRequired.set(this.controlIsRequired(this.control()))}controlIsRequired(e){return e.hasValidator(F.required)}getError(e){let t=Object.keys(e);if(!t.length)return"";let o=t[0],i=e[t[0]];switch(o){case"required":return"Este campo es requerido.";case"minlength":return`Tiene que tener como m\xEDnimo ${i.requiredLength} caracteres.`;case"maxlength":return`Tiene que tener como m\xE1ximo ${i.requiredLength} caracteres.`;case"pattern":return"La contrase\xF1a debe contener al menos una letra may\xFAscula, una min\xFAscula y un s\xEDmbolo especial.";default:return"Revisa el valor ingresado."}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=g({type:n,selectors:[["lib-grcm-form-field"]],viewQuery:function(t,o){t&1&&z(o.controlView,Ze,5,S),t&2&&j()},hostAttrs:[1,"form-group"],inputs:{control:[1,"control"],id:[1,"id"],label:[1,"label"]},decls:9,vars:4,consts:[["controlView",""],[1,"form-label",3,"for"],[1,"input-group","has-validation","form-field-invalid"],[1,"invalid-feedback","d-block"]],template:function(t,o){if(t&1&&(b(0)(1),d(2,"label",1),I(3),u(),d(4,"div",2),y(5,null,0),d(7,"div",3),c(8,We,3,1),u()()),t&2){let i=T(o.control().errors),_=o.control().touched;l(2),m("for",o.id()),l(),B(o.completeLabel()),l(5),p(_&&i?8:-1)}},dependencies:[O],styles:["[_nghost-%COMP%]{margin:0;padding:0;width:100%}"],changeDetection:0})}return n})();var Ie=(()=>{class n{_grcmFormComponent=C(P);controlComp=C($);_destroyRef=C(E);type=a("text");placeholder=a("");debounceTimer=a(300);icon=a();autocomplete=a(!0);submitFormOnDebounce=a(!1);changeValue=x();debounce=x();control=f(()=>this.controlComp.control());id=f(()=>this.controlComp.id());additionalClasses=a();_value=R("");value=this._value.asReadonly();_disabled=R(!1);disabled=this._disabled.asReadonly();_debouncer=new oe;ngOnInit(){this.initialize()}initialize(){this._debouncer.pipe(D(this._destroyRef),ie(this.debounceTimer())).subscribe(e=>{this.debounce.emit(e),this.submitFormOnDebounce()&&this._grcmFormComponent.onSubmit()})}change(e){this._onTouched(),this._onChange(e)}onBlur(){this._onTouched()}_onChange=()=>{};_onTouched=()=>{};registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}writeValue(e){e||(e=""),this._value.set(e)}setDisabledState(e){this._disabled.set(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=g({type:n,selectors:[["lib-grcm-input"]],inputs:{type:[1,"type"],placeholder:[1,"placeholder"],debounceTimer:[1,"debounceTimer"],icon:[1,"icon"],autocomplete:[1,"autocomplete"],submitFormOnDebounce:[1,"submitFormOnDebounce"],additionalClasses:[1,"additionalClasses"]},outputs:{changeValue:"changeValue",debounce:"debounce"},decls:1,vars:1,consts:[["searchInput",""],[1,"input-group-text"],[1,"form-control",3,"input","blur","type","placeholder","value","id","ngClass"],[3,"ngClass"]],template:function(t,o){t&1&&c(0,Ye,7,12),t&2&&p(o.control()?0:-1)},dependencies:[O,A,Q],encapsulation:2})}return n})(),Oe=(()=>{class n{_responseForm=R(null);responseForm=this._responseForm.asReadonly();submitForm=x();dataForm={form:{id:"login"},controls:{username:{component:Ie,formFieldComponent:Se,value:"",validators:[F.required,F.minLength(3),F.maxLength(10)],args:{control:{debounceTimer:1e3,placeholder:"Escriba su usuario",icon:"person-circle",autocomplete:!1},formField:{label:"Usuario"}},classes:{control:"input-group"}},password:{component:Ie,formFieldComponent:Se,value:"",validators:[F.required,F.minLength(6),F.maxLength(15),F.pattern('^(?=.*[a-z])(?=.*[A-Z])(?=.*[-_!@#$%^&*(),.?":{}|<>]).+$')],args:{control:{type:"password",placeholder:"Escriba su contrase\xF1a",icon:"lock",autocomplete:!1},formField:{label:"Contrase\xF1a"}},classes:{control:"input-group"}}}};buildForm(e){}onChangeControl(e){}onSubmit(e){let t=ne({},e.form.value);this._responseForm.set(t),this.submitForm.emit(t)}getErrors(e){return console.log({errors:e}),e?Object.keys(e):[]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=g({type:n,selectors:[["lib-grcm-example-login"]],outputs:{submitForm:"submitForm"},decls:4,vars:5,consts:[["afterFormTemplate",""],["classes","row pb-4",3,"buildForm","formChange","formSubmit","data","templates"],[1,"container","mt-4"],[1,"invalid-feedback","d-block"],["label","Entrar","type","submit",3,"disabled"],[1,"highlight","p-2"],["data-lang","js",1,"language-javascript"]],template:function(t,o){if(t&1){let i=M();d(0,"lib-grcm-form",1),k("buildForm",function(v){return L(i),G(o.buildForm(v))})("formChange",function(v){return L(i),G(o.onChangeControl(v))})("formSubmit",function(v){return L(i),G(o.onSubmit(v))}),c(1,ot,3,2,"ng-template",null,0,Y),u(),c(3,it,8,3,"div",2)}if(t&2){let i=W(2);m("data",o.dataForm)("templates",_e(3,et,i)),l(3),p(o.responseForm()?3:-1)}},dependencies:[O,be,rt,P],styles:[".highlight[_ngcontent-%COMP%]{background-color:#f7f7f9}"]})}return n})();var ee=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["testing-login"]],decls:1,vars:0,template:function(e,t){e&1&&h(0,"lib-grcm-example-login")},dependencies:[Oe],encapsulation:2})};export{ee as default};
