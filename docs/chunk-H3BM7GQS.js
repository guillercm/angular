import{d as ie}from"./chunk-N732RDM7.js";import{a as ne}from"./chunk-HQ6BEVK7.js";import{A as q,Da as X,E as H,Fa as E,Gd as te,K as z,N as b,Na as K,Sa as Q,X as _,Z as J,_ as C,cd as Z,dd as Y,ea as l,ha as y,ja as d,ka as u,n as m,p as v,pa as W,u as L,vd as ee,y as M,z as N,za as j}from"./chunk-MHIS6V2U.js";import{a as U}from"./chunk-75BJGDCN.js";var T=class{},he=(()=>{class n extends T{getTranslation(e){return m({})}static \u0275fac=(()=>{let e;return function(i){return(e||(e=j(n)))(i||n)}})();static \u0275prov=l({token:n,factory:n.\u0275fac})}return n})(),P=class{},fe=(()=>{class n{handle(e){return e.key}static \u0275fac=function(t){return new(t||n)};static \u0275prov=l({token:n,factory:n.\u0275fac})}return n})();function g(n){return typeof n<"u"&&n!==null}function x(n){return A(n)&&!B(n)&&n!==null}function A(n){return typeof n=="object"}function B(n){return Array.isArray(n)}function se(n){return typeof n=="string"}function de(n){return typeof n=="function"}function O(n,s){let e=Object.assign({},n);return A(n)?(A(n)&&A(s)&&Object.keys(s).forEach(t=>{x(s[t])?t in n?e[t]=O(n[t],s[t]):Object.assign(e,{[t]:s[t]}):Object.assign(e,{[t]:s[t]})}),e):O({},s)}function G(n,s){let e=s.split(".");s="";do s+=e.shift(),g(n)&&g(n[s])&&(x(n[s])||B(n[s])||!e.length)?(n=n[s],s=""):e.length?s+=".":n=void 0;while(e.length);return n}function ge(n,s,e){let t=s.split("."),i=n;for(let r=0;r<t.length;r++){let a=t[r];r===t.length-1?i[a]=e:((!i[a]||!x(i[a]))&&(i[a]={}),i=i[a])}}var I=class{},pe=(()=>{class n extends I{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,t){if(se(e))return this.interpolateString(e,t);if(de(e))return this.interpolateFunction(e,t)}interpolateFunction(e,t){return e(t)}interpolateString(e,t){return t?e.replace(this.templateMatcher,(i,r)=>{let a=G(t,r);return g(a)?a:i}):e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=j(n)))(i||n)}})();static \u0275prov=l({token:n,factory:n.\u0275fac})}return n})(),w=class{},me=(()=>{class n extends w{compile(e,t){return e}compileTranslations(e,t){return e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=j(n)))(i||n)}})();static \u0275prov=l({token:n,factory:n.\u0275fac})}return n})(),S=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new E;onLangChange=new E;onDefaultLangChange=new E},re=new y("ISOLATE_TRANSLATE_SERVICE"),ae=new y("USE_DEFAULT_LANG"),oe=new y("DEFAULT_LANGUAGE"),le=new y("USE_EXTEND"),D=n=>v(n)?n:m(n),$=(()=>{class n{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(e){this.store.defaultLang=e}get currentLang(){return this.store.currentLang}set currentLang(e){this.store.currentLang=e}get langs(){return this.store.langs}set langs(e){this.store.langs=e}get translations(){return this.store.translations}set translations(e){this.store.translations=e}constructor(e,t,i,r,a,f=!0,c=!1,p=!1,h){this.store=e,this.currentLoader=t,this.compiler=i,this.parser=r,this.missingTranslationHandler=a,this.useDefaultLang=f,this.extend=p,c&&(this.store=new S),h&&this.setDefaultLang(h)}setDefaultLang(e){if(e===this.defaultLang)return;let t=this.retrieveTranslations(e);typeof t<"u"?(this.defaultLang==null&&(this.defaultLang=e),t.pipe(b(1)).subscribe(()=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(this.lastUseLanguage=e,e===this.currentLang)return m(this.translations[e]);this.currentLang||(this.currentLang=e);let t=this.retrieveTranslations(e);return v(t)?(t.pipe(b(1)).subscribe(()=>{this.changeLang(e)}),t):(this.changeLang(e),m(this.translations[e]))}changeLang(e){e===this.lastUseLanguage&&(this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),this.defaultLang==null&&this.changeDefaultLang(e))}retrieveTranslations(e){if(typeof this.translations[e]>"u"||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}getTranslation(e){return this.loadAndCompileTranslations(e)}loadAndCompileTranslations(e){this.pending=!0;let t=this.currentLoader.getTranslation(e).pipe(_(1),b(1));return this.loadingTranslations=t.pipe(L(i=>this.compiler.compileTranslations(i,e)),_(1),b(1)),this.loadingTranslations.subscribe({next:i=>{this.translations[e]=this.extend&&this.translations[e]?U(U({},i),this.translations[e]):i,this.updateLangs(),this.pending=!1},error:i=>{this.pending=!1}}),t}setTranslation(e,t,i=!1){let r=this.compiler.compileTranslations(t,e);(i||this.extend)&&this.translations[e]?this.translations[e]=O(this.translations[e],r):this.translations[e]=r,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){let t=e.filter(i=>!this.langs.includes(i));t.length>0&&(this.langs=[...this.langs,...t])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(e,t,i){let r;if(e&&(r=this.runInterpolation(G(e,t),i)),r===void 0&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(r=this.runInterpolation(G(this.translations[this.defaultLang],t),i)),r===void 0){let a={key:t,translateService:this};typeof i<"u"&&(a.interpolateParams=i),r=this.missingTranslationHandler.handle(a)}return r!==void 0?r:t}runInterpolation(e,t){if(B(e))return e.map(i=>this.runInterpolation(i,t));if(x(e)){let i={};for(let r in e){let a=this.runInterpolation(e[r],t);a!==void 0&&(i[r]=a)}return i}else return this.parser.interpolate(e,t)}getParsedResult(e,t,i){if(t instanceof Array){let r={},a=!1;for(let c of t)r[c]=this.getParsedResultForKey(e,c,i),a=a||v(r[c]);if(!a)return r;let f=t.map(c=>D(r[c]));return q(f).pipe(L(c=>{let p={};return c.forEach((h,o)=>{p[t[o]]=h}),p}))}return this.getParsedResultForKey(e,t,i)}get(e,t){if(!g(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(z(i=>D(this.getParsedResult(i,e,t)))):D(this.getParsedResult(this.translations[this.currentLang],e,t))}getStreamOnTranslationChange(e,t){if(!g(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return M(N(()=>this.get(e,t)),this.onTranslationChange.pipe(C(i=>{let r=this.getParsedResult(i.translations,e,t);return D(r)})))}stream(e,t){if(!g(e)||!e.length)throw new Error('Parameter "key" required');return M(N(()=>this.get(e,t)),this.onLangChange.pipe(C(i=>{let r=this.getParsedResult(i.translations,e,t);return D(r)})))}instant(e,t){if(!g(e)||e.length===0)throw new Error('Parameter "key" is required and cannot be empty');let i=this.getParsedResult(this.translations[this.currentLang],e,t);return v(i)?Array.isArray(e)?e.reduce((r,a)=>(r[a]=a,r),{}):e:i}set(e,t,i=this.currentLang){ge(this.translations[i],e,se(t)?this.compiler.compile(t,i):this.compiler.compileTranslations(t,i)),this.updateLangs(),this.onTranslationChange.emit({lang:i,translations:this.translations[i]})}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],delete this.translations[e]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(t){return new(t||n)(d(S),d(T),d(w),d(I),d(P),d(ae),d(re),d(le),d(oe))};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Fe=(n={})=>W([n.loader||{provide:T,useClass:he},n.compiler||{provide:w,useClass:me},n.parser||{provide:I,useClass:pe},n.missingTranslationHandler||{provide:P,useClass:fe},S,{provide:re,useValue:n.isolate},{provide:ae,useValue:n.useDefaultLang},{provide:le,useValue:n.extend},{provide:oe,useValue:n.defaultLanguage},$]);var F=class n{_i18nPluralPipe=u(ee);get(s,e,t){return typeof e=="object"&&(typeof e["=0"]=="string"||typeof e["=1"]=="string")?this._i18nPluralPipe.transform(s,e,t):null}constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};var ue=(()=>{class n{constructor(){this.document=u(Y),this.platformId=u(Q),this.request=u(Z,{optional:!0}),this.documentIsAccessible=te(this.platformId)}static getCookieRegExp(e){let t=e.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+t+"|;\\s*"+t+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch{return e}}check(e){return e=encodeURIComponent(e),n.getCookieRegExp(e).test(this.documentIsAccessible?this.document.cookie:this.request?.headers.get("cookie"))}get(e){if(this.check(e)){e=encodeURIComponent(e);let i=n.getCookieRegExp(e).exec(this.documentIsAccessible?this.document.cookie:this.request?.headers.get("cookie"));return i&&i[1]?n.safeDecodeURIComponent(i[1]):""}return""}getAll(){let e={},t=this.documentIsAccessible?this.document?.cookie:this.request?.headers.get("cookie");return t&&t!==""&&t.split(";").forEach(i=>{let[r,a]=i.split("=");e[n.safeDecodeURIComponent(r.replace(/^ /,""))]=n.safeDecodeURIComponent(a)}),e}set(e,t,i,r,a,f,c,p){if(!this.documentIsAccessible)return;if(typeof i=="number"||i instanceof Date||r||a||f||c){let k={expires:i,path:r,domain:a,secure:f,sameSite:c||"Lax",partitioned:p};this.set(e,t,k);return}let h=encodeURIComponent(e)+"="+encodeURIComponent(t)+";",o=i||{};if(o.expires)if(typeof o.expires=="number"){let k=new Date(new Date().getTime()+o.expires*1e3*60*60*24);h+="expires="+k.toUTCString()+";"}else h+="expires="+o.expires.toUTCString()+";";o.path&&(h+="path="+o.path+";"),o.domain&&(h+="domain="+o.domain+";"),o.secure===!1&&o.sameSite==="None"&&(o.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),o.secure&&(h+="secure;"),o.sameSite||(o.sameSite="Lax"),h+="sameSite="+o.sameSite+";",o.partitioned&&(h+="Partitioned;"),this.document.cookie=h}delete(e,t,i,r,a="Lax"){if(!this.documentIsAccessible)return;let f=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(e,"",{expires:f,path:t,domain:i,secure:r,sameSite:a})}deleteAll(e,t,i,r="Lax"){if(!this.documentIsAccessible)return;let a=this.getAll();for(let f in a)a.hasOwnProperty(f)&&this.delete(f,e,t,i,r)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var V=class n{_ssrCookiesService=u(ue);get(s,e=""){return this._ssrCookiesService.get(s)||e}set(s,e){this._ssrCookiesService.set(s,e)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};var ce=class n{_destroyRef=u(X);_cookiesService=u(V);_configService=u(ie);_translate=u($);_i18nPluralService=u(F);_currentLang=K("");currentLang=this._currentLang.asReadonly();changesLangObservables=[this._translate.onDefaultLangChange,this._translate.onTranslationChange,this._translate.onLangChange.pipe(J(null))];constructor(){this.initialize()}initialize(){this._translate.addLangs(this._configService.config().languages.availables)}useLang(s){s&&(this._currentLang.set(s),this._translate.use(s),this._cookiesService.set("lang",s))}initializeLang(){let s=this._cookiesService.get("lang",this._configService.config().languages.default);this.useLang(s)}handlePlurals(s,e){let t=this._i18nPluralService.get(s,e);return t===null?e:t}getTranslate(s,e){return this._translate.get(s,e)}getValueForPlurals(s){let e=0;if(s&&typeof s=="object"){let t=Object.values(s);t.length&&(e=t[0])}return e}get(s,e){let t=K(""),i=this.getValueForPlurals(e);return H(...this.changesLangObservables).pipe(ne(this._destroyRef),C(()=>this.getTranslate(s,e)),L(r=>this.handlePlurals(i,r))).subscribe(r=>{t.set(r)}),t}getValue(s,e){let t=this.getValueForPlurals(e);return this.handlePlurals(t,this._translate.instant(s,e))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=l({token:n,factory:n.\u0275fac,providedIn:"root"})};export{T as a,he as b,P as c,I as d,pe as e,w as f,me as g,Fe as h,ue as i,V as j,ce as k};
