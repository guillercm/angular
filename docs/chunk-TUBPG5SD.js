import{a as B}from"./chunk-JZJMG7BS.js";import{b as U}from"./chunk-TL2ENYRO.js";import{a as j}from"./chunk-KN4VHTSD.js";import{a as y}from"./chunk-APTPNK3X.js";import{$b as w,Ac as C,Cb as g,Cd as M,Da as _,Fc as h,Gc as P,Hc as A,Ib as F,Ka as s,Na as m,Tb as q,Xb as L,Xc as b,Yb as R,_b as I,ac as n,bc as a,cc as S,dc as V,hc as u,ka as p,ob as r,oc as x,pc as T,rc as f,sc as k,uc as E,vb as c,wb as v,yc as D,zc as O}from"./chunk-RKFGQAXB.js";var z=["controlView"];function N(o,e){if(o&1&&(n(0,"p"),f(1),h(2,"appTranslate"),a(),S(3,"p")),o&2){let t=e.$implicit;u(2);let i=C(0);r(),k(A(2,1,"i18n.common.errors.validations."+t,i[t]))}}function $(o,e){if(o&1&&I(0,N,4,4,null,null,R),o&2){let t=u(),i=C(0);w(t.getErrors(i))}}var Q=class o{control=s.required();id=s.required();controlView=v.required("controlView",{read:c});_destroyRef=p(_);_formComponent=p(B);label=s("");_isRequired=m(!1);isRequired=this._isRequired.asReadonly();_useCompleteLabel=m(!1);useCompleteLabel=this._useCompleteLabel.asReadonly();requiredLabel="i18n.common.requiredFieldTag";optionalLabel="i18n.common.optionalFieldTag";form=b(()=>this._formComponent.form());completeLabel=b(()=>this.isRequired()?this.requiredLabel:this.optionalLabel);ngOnInit(){this.initialize()}initialize(){this.initControlStatusChanges(),this.initFormStatusChanges(),this.setIsRequired()}initControlStatusChanges(){this.control().statusChanges.pipe(y(this._destroyRef)).subscribe(e=>{this.setIsRequired()})}initFormStatusChanges(){let e=this._formComponent.form();e&&(this.setUseCompleteLabel(),e.statusChanges.pipe(y(this._destroyRef)).subscribe(t=>{this.setUseCompleteLabel()}))}setUseCompleteLabel(){let e=this._formComponent.form();if(!e)return;let t=0,i=Object.keys(e.controls);i.forEach(d=>{this.controlIsRequired(e.controls[d])&&t++});let l=i.length/2;this.isRequired()&&t<=l?this._useCompleteLabel.set(!0):!this.isRequired()&&t>l?this._useCompleteLabel.set(!0):this._useCompleteLabel.set(!1)}setIsRequired(){this._isRequired.set(this.controlIsRequired(this.control()))}controlIsRequired(e){return e.hasValidator(U.required)}getErrors(e){return e?Object.keys(e):[]}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=g({type:o,selectors:[["features-form-field"]],viewQuery:function(t,i){t&1&&x(i.controlView,z,5,c),t&2&&T()},inputs:{control:[1,"control"],id:[1,"id"],label:[1,"label"]},decls:10,vars:7,consts:[["controlView",""],[1,"form-label",3,"for"],[1,"input-group","has-validation","form-field-invalid"],[1,"invalid-feedback","d-block"]],template:function(t,i){if(t&1&&(D(0)(1),n(2,"label",1),f(3),h(4,"appTranslate"),a(),n(5,"div",2),V(6,null,0),n(8,"div",3),F(9,$,2,0),a()()),t&2){let l=O(i.control().errors),d=i.control().touched;r(2),q("for",i.id()),r(),E("",i.label(),"",i.useCompleteLabel()?P(4,5,i.completeLabel()):"",""),r(6),L(d&&l?9:-1)}},dependencies:[M,j],styles:["[_nghost-%COMP%]{margin:0;padding:0;width:100%}"],changeDetection:0})};export{Q as a};
