import{$ as h,Ba as w,Da as d,Na as b,Wc as v,Xc as k,Yc as D,_c as x,c as g,ca as f,h as p,ka as l,ta as a}from"./chunk-RKFGQAXB.js";import{a as y,b as m}from"./chunk-75BJGDCN.js";function j(r){r||(a(j),r=l(d));let e=new g(t=>r.onDestroy(t.next.bind(t)));return t=>t.pipe(h(e))}function O(r,e){!e?.injector&&a(O);let t=e?.injector??l(w),s=new p(1),u=D(()=>{let n;try{n=r()}catch(i){v(()=>s.error(i));return}v(()=>s.next(n))},{injector:t,manualCleanup:!0});return t.get(d).onDestroy(()=>{u.destroy(),s.complete()}),s.asObservable()}function R(r,e){let t=!e?.manualCleanup;t&&!e?.injector&&a(R);let s=t?e?.injector?.get(d)??l(d):null,u=S(e?.equal),n;e?.requireSync?n=b({kind:0},{equal:u}):n=b({kind:1,value:e?.initialValue},{equal:u});let i=r.subscribe({next:o=>n.set({kind:1,value:o}),error:o=>{if(e?.rejectErrors)throw o;n.set({kind:2,error:o})}});if(e?.requireSync&&n().kind===0)throw new f(601,!1);return s?.onDestroy(i.unsubscribe.bind(i)),k(()=>{let o=n();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new f(601,!1)}},{equal:e?.equal})}function S(r=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&r(e.value,t.value)}function q(r){return r?.injector||a(q),x(m(y({},r),{loader:void 0,stream:e=>{let t,s=()=>t.unsubscribe();e.abortSignal.addEventListener("abort",s);let u=b({value:void 0}),n,i=new Promise(c=>n=c);function o(c){u.set(c),n?.(u),n=void 0}return t=r.loader(e).subscribe({next:c=>o({value:c}),error:c=>o({error:c}),complete:()=>{n&&o({error:new Error("Resource completed before producing a value")}),e.abortSignal.removeEventListener("abort",s)}}),i}}))}export{j as a,O as b,R as c,q as d};
