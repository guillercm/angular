import{a as ve}from"./chunk-TKP6X5PP.js";import{a as be}from"./chunk-ZR4AHC3X.js";import{a as ge}from"./chunk-3MXPKLMU.js";import{a as he}from"./chunk-HL6QVRSU.js";import{a as Se}from"./chunk-DN4UA525.js";import{a as fe,b as _e}from"./chunk-KMUSLYNV.js";import{a as pe,b as ce}from"./chunk-XTGNL34W.js";import{a as de}from"./chunk-W7JQM2JG.js";import{k as le}from"./chunk-7BMN6MAC.js";import{c as ae,d as me}from"./chunk-4ABDAOUK.js";import"./chunk-ALUDBVXM.js";import"./chunk-G42HR5GR.js";import{b as w}from"./chunk-LKWVCNZG.js";import{a as se}from"./chunk-HQ6BEVK7.js";import{a as ue}from"./chunk-VVT4Q77C.js";import"./chunk-VGIZYUEZ.js";import"./chunk-GTJUILT2.js";import"./chunk-KP3CEOU7.js";import{$b as G,Da as z,Db as T,Dc as ee,Dd as k,Ec as te,Fb as $,Gb as J,Gc as u,Hc as ie,Ic as oe,Jb as V,Jc as g,Ka as F,Lc as ne,Na as S,Ub as m,Yb as K,Yc as b,Zb as B,Zc as x,_ as L,_c as re,aa as U,ac as M,bc as n,cc as r,dc as f,ea as y,fc as X,hc as H,ic as Y,ka as p,pb as s,rc as Z,sc as l,tb as W,tc as _,u as D,uc as N,va as h,wa as v,wb as Q}from"./chunk-MHIS6V2U.js";import"./chunk-75BJGDCN.js";var I=class i{_viewContainerRef=p(Q);_renderer=p(W);sharedSkeletonGlow=F(!1);effectSkeleton=x(()=>{let t=this.sharedSkeletonGlow(),e=this._viewContainerRef.element.nativeElement;t?this._renderer.addClass(e,"placeholder-glow"):this._renderer.removeClass(e,"placeholder-glow")});static \u0275fac=function(e){return new(e||i)};static \u0275dir=$({type:i,selectors:[["","sharedSkeletonGlow",""]],inputs:{sharedSkeletonGlow:[1,"sharedSkeletonGlow"]}})};var E=class i{_lorem="Lorem ipsum dolor sit amet consectetur adipisicing elit. Aliquid minima vero eius nisi saepe quas deleniti incidunt quo debitis? Quos libero earum vel eligendi delectus, incidunt pariatur dicta. Libero, asperiores.";_space="&nbsp;";transform(t,e,o){if(t)return t;switch(o){case"lorem":return this._lorem.slice(0,e);default:return o?o.repeat(e):this._space.repeat(e)}}static \u0275fac=function(e){return new(e||i)};static \u0275pipe=J({name:"sharedFilledText",type:i,pure:!0})};var R=class i{simpson=F(null);skeleton=b(()=>!this.simpson());static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["features-simpson-card"]],hostAttrs:[1,"col","col-12","col-md-6","col-xxl-4"],inputs:{simpson:[1,"simpson"]},decls:20,vars:27,consts:[[1,"card",3,"sharedSkeletonGlow"],[1,"row"],[1,"col-md-4","col-sm-12",2,"height","224px"],[3,"url","skeleton"],[1,"col-md-8","col-sm-12"],[1,"card-body"],[1,"card-title","placeholder",3,"sharedSkeletonText"],[1,"card-text",3,"sharedSkeletonText"],[1,"card-text"],[1,"text-muted",3,"sharedSkeletonText"],[1,"list-group","list-group-flush"],[1,"list-group-item",3,"sharedSkeletonText"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),f(3,"shared-image",3),r(),n(4,"div",4)(5,"div",5)(6,"h5",6),l(7),u(8,"sharedFilledText"),r(),n(9,"p",7),l(10),u(11,"sharedFilledText"),r(),n(12,"p",8)(13,"small",9),l(14),u(15,"sharedFilledText"),r()()()()(),n(16,"ul",10)(17,"li",11),l(18),u(19,"sharedFilledText"),r()()()),e&2){let a,d,c,q,O;m("sharedSkeletonGlow",o.skeleton()),s(3),m("url","img/simpsons/"+((a=o.simpson())==null?null:a.image))("skeleton",o.skeleton()),s(3),m("sharedSkeletonText",o.skeleton()),s(),_(g(8,11,(d=o.simpson())==null?null:d.fullName,20,"-")),s(2),m("sharedSkeletonText",o.skeleton()),s(),N("",g(11,15,(c=o.simpson())==null?null:c.description,20,"-")," "),s(3),m("sharedSkeletonText",o.skeleton()),s(),_(g(15,19,(q=o.simpson())==null?null:q.personality,70,"-")),s(3),m("sharedSkeletonText",o.skeleton()),s(),N("",g(19,23,(O=o.simpson())==null?null:O.funFact,20,"-")," ")}},dependencies:[k,ce,I,pe,E],styles:[".card[_ngcontent-%COMP%]{height:100%}"]})};var A=class i{_modelAdapter=p(ve);adapt=t=>this._modelAdapter.adapt(t,e=>({id:Number(e.id),fullName:e.nombre+" "+e.apellidos,age:e.edad,image:e.imagen,personality:e.personalidad,description:e.descripcion,funFact:e.dato_curioso}));adaptArray=t=>this._modelAdapter.adaptArray(t,this.adapt);static \u0275fac=function(e){return new(e||i)};static \u0275prov=y({token:i,factory:i.\u0275fac,providedIn:"root"})};var P=class i{_apiHandlerService=p(ae);_configService=p(me);_simpsonsAdapter=p(A);_configApi=S(null);constructor(){this.initialize()}initialize(){this._configApi.set(this._configService.config().apis.simpsons)}getEndpoint(t){return this._apiHandlerService.getEndpoint(this._configApi,t)}getSimpsonById(t){let e=this.getEndpoint("getSimpsonById");return this._apiHandlerService.get(e,{pathParams:{id:t},params:{id:t}}).pipe(D(o=>this._simpsonsAdapter.adapt(o)))}getSimpsons(){let t=this.getEndpoint("getSimpsons");return this._apiHandlerService.get(t,{context:{id:"getSimpsons"}}).pipe(D(e=>this._simpsonsAdapter.adaptArray(e)))}getSimpsonsWithDelay(t){return this._apiHandlerService.get("https://dummyjson.com/RESOURCE/",{params:{delay:t*1e3},context:{id:"getSimpsonsWithDelay",actionsForAnHttpError:{modal:{}}}}).pipe(L(()=>this.getSimpsons()))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=y({token:i,factory:i.\u0275fac,providedIn:"root"})};var ye=i=>({afterFormTemplate:i}),Fe=()=>({hours:45});function Te(i,t){if(i&1&&(n(0,"div",6),f(1,"shared-button",7),r(),n(2,"div",6),f(3,"shared-button",8),r()),i&2){let e=t.formValid;s(3),m("disabled",!e)}}function xe(i,t){if(i&1&&f(0,"features-simpson-card",9),i&2){let e=t.$implicit;m("simpson",e)}}function ke(i,t){i&1&&(n(0,"div"),l(1,"No hay simpsons"),r())}function we(i,t){if(i&1&&G(0,xe,1,1,"features-simpson-card",9,B,!1,ke,2,0,"div"),i&2){let e=Y();M(e.simpsons())}}function Ie(i,t){i&1&&f(0,"features-simpson-card")}function Ee(i,t){i&1&&(G(0,Ie,1,0,"features-simpson-card",null,B),u(2,"sharedRepeat")),i&2&&M(ie(2,0,5))}function Re(i,t){i&1&&(n(0,"p",4),l(1,"Ha habido un error al obtener los simpsons."),r())}function Ae(i,t){i&1&&(n(0,"p",5),l(1,"Pulsa el bot\xF3n para cargar los simpsons"),r())}var j=class i{static subs=null;_destroyRef=p(z);_interceptorService=p(he);_simpsonsServices=p(P);_modalService=p(ge);form=S(null);_simpsons=S([]);simpsons=this._simpsons.asReadonly();simpsonsObservable=null;simpsonsRequest=b(()=>this._interceptorService.getHttpRequestById("getSimpsons"));_simpsonId=S(1);simpsonId=this._simpsonId.asReadonly();_linkedIdSimpson=re(()=>this.simpsonId());_appTranslateService=p(le);prueba=this._appTranslateService.get("i18n.common.time.hours",{hours:45});simpsonsCargados=b(()=>this.simpsons().length>0);simpsonEffects=x(()=>{this._linkedIdSimpson.set(78),console.log("idSimpson "+this._linkedIdSimpson()),console.log(this.simpsonsRequest())});dataForm={form:{id:"simpsons"},controls:{fullName:{component:_e,formFieldComponent:Se,value:"",validators:[w.required,w.minLength(3),w.maxLength(6)],args:{control:{debounceTimer:1e3,placeholder:this._appTranslateService.get("i18n.features.simpsons.prueba"),icon:"person-circle",autocomplete:!1,debounce:t=>{}},formField:{label:"Nombre completo"}},classes:{formField:"mt-3 col-12",control:"input-group"}}}};buildForm(t){this.form.set(t)}onChangeControl(t){console.log(t)}onSubmit(t){this._simpsonId.update(e=>e+1)}loadSimpsons(){this._simpsonsServices.getSimpsons().pipe(se(this._destroyRef),U(t=>{this._simpsons.set(t)})).subscribe()}ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["features-simpsons"]],decls:14,vars:13,consts:[["afterFormTemplate",""],["classes","row pb-4",3,"buildForm","formChange","formSubmit","data","templates"],[3,"clicked","disabled","label"],[1,"row","g-3","pt-4"],[1,"bg-danger"],[1,"text-info","bg-dark"],[1,"mt-3","col-6"],["label","Limpiar","variant","info","type","reset"],["label","Guardar","type","submit",3,"disabled"],[3,"simpson"]],template:function(e,o){if(e&1){let a=X();n(0,"pato-form",1),H("buildForm",function(c){return h(a),v(o.buildForm(c))})("formChange",function(c){return h(a),v(o.onChangeControl(c))})("formSubmit",function(c){return h(a),v(o.onSubmit(c))}),V(1,Te,4,1,"ng-template",null,0,ne),r(),n(3,"pre"),l(4),u(5,"appTranslate"),r(),n(6,"pre"),l(7),r(),n(8,"shared-button",2),H("clicked",function(){return h(a),v(o.loadSimpsons())}),r(),n(9,"div",3),V(10,we,3,1)(11,Ee,3,2)(12,Re,2,0,"p",4)(13,Ae,2,0,"p",5),r()}if(e&2){let a,d=Z(2);m("data",o.dataForm)("templates",te(10,ye,d)),s(4),_(oe(5,7,"i18n.common.time.hours",ee(12,Fe))),s(3),_(o.prueba()),s(),m("disabled",o.simpsonsCargados())("label",o.simpsonsCargados()?"Simpsons cargados":"Cargar simpsons"),s(2),K((a=(a=o.simpsonsRequest())==null?null:a.state)==="complete"?10:a==="loading"?11:a==="error"?12:13)}},dependencies:[k,fe,ue,R,be,de],encapsulation:2,changeDetection:0})};export{j as default};
