import{a as p,b as u}from"./chunk-LCKYHSPT.js";import{Na as l,ea as m,ka as c}from"./chunk-RKFGQAXB.js";import{a as i}from"./chunk-75BJGDCN.js";var r={baseUrl:"https://api.github.com/repos/angular/angular",gitHubToken:"git"+"HUB".toLowerCase()+"_pat_11BC65MJA06anSsSs3wjQY_bADLLvRx5fK3tBnW3vDOgYYig5V2rIDxRbtnTZ7IbwV5VZP77T7mDlew8Ws"};var b=r.gitHubToken,o=()=>{let t={};return b&&(t.Authorization=`Bearer ${b}`),t};var n=async t=>new Promise(e=>setTimeout(e,t));var f=r.baseUrl,a=async t=>{await n(1500);try{let e=await fetch(`${f}/issues/${t}`,{headers:i({},o())});if(!e.ok)throw`Can't load issue ${t}`;let s=await e.json();return console.log({issue:s}),s}catch{throw`Can't load issue ${t}`}};var g=r.baseUrl,y=async t=>{await n(1500);try{let e=await fetch(`${g}/issues/${t}/comments`,{headers:i({},o())});if(!e.ok)throw`Can't load comments issue ${t}`;let s=await e.json();return console.log({issues:s}),s}catch{throw`Can't load comments issue ${t}`}};var h=class t{_issueNumber=l(null);_queryClient=c(p);_staleTime=1e3*60*5;issueQuery=u(()=>({queryKey:["issue",this._issueNumber()],queryFn:()=>a(this._issueNumber()),enabled:this._issueNumber()!==null,staleTime:this._staleTime}));issueCommentsQuery=u(()=>({queryKey:["issue",this._issueNumber(),"comments"],queryFn:()=>y(this._issueNumber()),enabled:this._issueNumber()!==null}));setIssueNumber(e){this._issueNumber.set(e)}prefetchIssue(e){this._queryClient.prefetchQuery({queryKey:["issue",e],queryFn:()=>a(e),staleTime:this._staleTime})}setIssueData(e){this._queryClient.setQueryData(["issue",e.number.toString()],e,{updatedAt:Date.now()*1e3*60})}static \u0275fac=function(s){return new(s||t)};static \u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"})};export{r as a,n as b,o as c,h as d};
