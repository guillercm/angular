import{a as bn}from"./chunk-GYTLM45L.js";import{a as We,b as Er}from"./chunk-LUMKQODB.js";import"./chunk-TKP6X5PP.js";import{a as Cn}from"./chunk-JAVRQMCG.js";import{a as bt,b as de,c as xn,d as Dn,e as St,f as he,g as U,h as nt,i as Te,j as ve,k as Pn,l as rt,m as Oe,n as st,o as Kt,p as qt,q as M,r as ne,s as Qt,t as Rn,u as Mn,v as En}from"./chunk-5WL5B5RF.js";import{a as kn}from"./chunk-3MXPKLMU.js";import{a as yn}from"./chunk-RD3VYT4D.js";import{a as Sn,b as wn}from"./chunk-KMUSLYNV.js";import{b as yt}from"./chunk-XTGNL34W.js";import{a as we}from"./chunk-W7JQM2JG.js";import{k as je}from"./chunk-7BMN6MAC.js";import{b as Ce}from"./chunk-FE3D3GWU.js";import"./chunk-4ABDAOUK.js";import"./chunk-ALUDBVXM.js";import{a as mn,i as gn,n as vn}from"./chunk-G42HR5GR.js";import"./chunk-LKWVCNZG.js";import{a as vt}from"./chunk-HQ6BEVK7.js";import{a as ce}from"./chunk-VVT4Q77C.js";import"./chunk-VGIZYUEZ.js";import"./chunk-GTJUILT2.js";import"./chunk-KP3CEOU7.js";import{$ as A,$b as fe,Ab as $i,Ba as oe,Cc as te,D as Bi,Da as Ne,Db as D,Dd as le,E as _e,Eb as ae,Ec as an,F as pt,Fa as L,Fb as G,Ga as V,Gc as R,Hb as Be,Hc as O,I as Wt,Ic as gt,Ja as Re,Jb as I,K as zi,Ka as Je,L as Hi,La as q,Lc as Ut,N as ji,Na as w,O as Wi,Pb as Ui,Q as Yt,Qb as Ki,Rc as He,Sb as qi,Ta as Yi,Tb as Q,Ub as S,Vc as ge,Wb as $,Wc as ln,Xc as cn,Ya as Xi,Yb as B,Yc as k,Z as be,Za as et,Zb as Me,Zc as Se,_ as Qe,_b as Qi,_c as dn,a as re,aa as ut,ac as me,ad as hn,bc as p,c as Ke,cc as _,dc as z,dd as ie,ea as C,f as g,fa as se,fc as P,g as Ai,gc as Zt,ha as W,hc as m,ic as f,j as jt,jc as Ee,ka as l,kc as Ie,kd as pn,la as _t,lc as Ji,ma as ft,md as un,n as qe,na as Xt,nc as Gt,oc as $t,pb as u,pc as en,qc as tn,ra as mt,rc as it,sb as ee,sc as x,tb as tt,tc as T,u as Li,ua as Le,uc as ze,va as y,vc as nn,vd as _n,w as Vi,wa as b,wb as Z,wc as rn,x as Ni,xb as Zi,xc as sn,yc as on,za as Ve,zb as Gi,zd as fn}from"./chunk-MHIS6V2U.js";import{a as ue,b as Ht,d as Mr,e as Fi}from"./chunk-75BJGDCN.js";var On=Mr((so,kt)=>{"use strict";var Fe={};function In(r){return Math.floor(Math.abs(r)+.5)*(r>=0?1:-1)}function Ct(r,t,e){r=In(r*e),t=In(t*e);var i=(r-t)*2;i<0&&(i=-i-1);for(var n="";i>=32;)n+=String.fromCharCode((32|i&31)+63),i/=32;return n+=String.fromCharCode((i|0)+63),n}Fe.decode=function(r,t){for(var e=0,i=0,n=0,s=[],o=0,a=0,c=null,d,h,v=Math.pow(10,Number.isInteger(t)?t:5);e<r.length;){c=null,o=1,a=0;do c=r.charCodeAt(e++)-63,a+=(c&31)*o,o*=32;while(c>=32);d=a&1?(-a-1)/2:a/2,o=1,a=0;do c=r.charCodeAt(e++)-63,a+=(c&31)*o,o*=32;while(c>=32);h=a&1?(-a-1)/2:a/2,i+=d,n+=h,s.push([i/v,n/v])}return s};Fe.encode=function(r,t){if(!r.length)return"";for(var e=Math.pow(10,Number.isInteger(t)?t:5),i=Ct(r[0][0],0,e)+Ct(r[0][1],0,e),n=1;n<r.length;n++){var s=r[n],o=r[n-1];i+=Ct(s[0],o[0],e),i+=Ct(s[1],o[1],e)}return i};function Tn(r){for(var t=[],e=0;e<r.length;e++){var i=r[e].slice();t.push([i[1],i[0]])}return t}Fe.fromGeoJSON=function(r,t){if(r&&r.type==="Feature"&&(r=r.geometry),!r||r.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return Fe.encode(Tn(r.coordinates),t)};Fe.toGeoJSON=function(r,t){var e=Fe.decode(r,t);return{type:"LineString",coordinates:Tn(e)}};typeof kt=="object"&&kt.exports&&(kt.exports=Fe)});var ke=class r{_sessionService=l(Ce);_places=w(this.loadPlaces());places=this._places.asReadonly();loadPlaces(){return this._sessionService.getItem("places",[])}savePlaces=Se(()=>this._sessionService.setItem("places",this._places()));addPlace(t){this._places.update(e=>[t,...e])}removePlace(t){this._places.update(e=>e.filter(i=>!this.placeIsEqual(i,t)))}placeIsSaved(t){return this.places().some(e=>this.placeIsEqual(e,t))}placeIsEqual(t,e){return t.full_address===e.full_address}static \u0275fac=function(e){return new(e||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ye=class r{_synth=k(()=>window.speechSynthesis);_appTranslateService=l(je);_language=k(()=>this._appTranslateService.currentLang());speak(t){let e=this._synth();if(!e)return;e.cancel();let i=new SpeechSynthesisUtterance(t);i.lang=this._language(),e.speak(i)}cancel(){let t=this._synth();t&&t.cancel()}static \u0275fac=function(e){return new(e||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})};var pe=class r{_sessionService=l(Ce);_mapsService=l(X);_speechService=l(Ye);_places=w([]);places=this._places.asReadonly();defaultTravelMode="driving";constructor(){this.loadPlaces()}canAddPlace(t){return!(this.placeOnTheItinerary(t)||this.places().length>4)}addPlace(t){this.canAddPlace(t)&&(this._places.update(e=>(t.travelMode||(t.travelMode=this.defaultTravelMode),e.push(t),e)),this.savePlaces())}removeItinerariesOfPlaces(){this._speechService.cancel(),this._mapsService.removeOldMarkers(),this._mapsService.removeLayers(),this._places.update(t=>t.map(e=>(delete e.itinerary,e)))}updateItinerariesOfPlace(t,e){this._places.update(i=>(i[t].itinerary=e,[...i]))}updateTravelModeOfPlace(t,e){this._places.update(i=>(i[t].travelMode=e,[...i]))}removePlace(t){this._places.update(e=>e.filter(i=>!this.placeIsEqual(i,t))),this.savePlaces()}placeOnTheItinerary(t){return this.places().some(e=>this.placeIsEqual(e,t))}movePlace(t,e){this._places.update(i=>{let[n]=i.splice(t,1);return i.splice(e,0,n),[...i]}),this.savePlaces()}placeIsEqual(t,e){return t.full_address===e.full_address}loadPlaces(){this._sessionService.getItem("itineraries",[]).map(e=>this.addPlace(e))}savePlaces(){this._sessionService.setItem("itineraries",this._places())}static \u0275fac=function(e){return new(e||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})};function Tr(r,t){if(r&1){let e=P();p(0,"div",4)(1,"shared-button",5),m("clicked",function(){y(e);let n=f();return b(n.savePlace())}),_()()}}function Or(r,t){if(r&1){let e=P();p(0,"div",4)(1,"shared-button",6),m("clicked",function(){y(e);let n=f();return b(n.addToItinerarie())}),_()()}}var wt=class r{_savedPlacesService=l(ke);_itinerariesService=l(pe);place=Je.required();canAddPlaceToItinerarie=k(()=>this._itinerariesService.canAddPlace(this.place()));_showBtnSavePlace=w(!0);showBtnSavePlace=this._showBtnSavePlace.asReadonly();constructor(){this.initialize()}initialize(){Se(()=>{this._showBtnSavePlace.set(!this._savedPlacesService.placeIsSaved(this.place()))})}savePlace(){this._savedPlacesService.addPlace(this.place()),this._showBtnSavePlace.set(!1)}addToItinerarie(){this._itinerariesService.addPlace(this.place())}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["features-mapbox-custom-popup"]],inputs:{place:[1,"place"]},decls:8,vars:3,consts:[[1,"card",2,"width","18rem"],[1,"card-body"],[1,"row"],[1,"card-text","h6","mb-3"],[1,"col"],["icon","bookmarks",3,"clicked"],["icon","geo-alt-fill","variant","secondary",3,"clicked"]],template:function(e,i){e&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),x(4),_()(),p(5,"div",2),I(6,Tr,2,0,"div",4)(7,Or,2,0,"div",4),_()()()),e&2&&(u(4),T(i.place().full_address),u(2),B(i.showBtnSavePlace()?6:-1),u(),B(i.canAddPlaceToItinerarie()?7:-1))},dependencies:[ce],styles:["[_nghost-%COMP%]{position:absolute}"]})};var ye=Fi(Er());var Dt=Fi(On());var xt=class r{decode(t){let e=Dt.decode(t);for(let i=0;i<e.length;i++){let n=e[i],s=n[1];n[1]=n[0],n[0]=s}return e}encode(t){return Dt.encode(t)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})};var Xe=class r{_sessionService=l(Ce);_themeService=l(yn);_styles=["streets-v12","outdoors-v12","light-v11","dark-v11","satellite-v9","satellite-streets-v12","navigation-day-v1","navigation-night-v1","theme"];_actualStyle=w("theme");actualStyle=k(()=>this._actualStyle());mapsStyle=k(()=>{let t=this.actualStyle();return t==="theme"&&(t=this._themeService.theme()==="light"?"light-v11":"dark-v11"),`mapbox://styles/mapbox/${t}`});constructor(){this.initialize()}initialize(){let t=this._sessionService.getItem("mapboxStyle","");t&&this._styles.includes(t)?this._actualStyle.set(t):(this._sessionService.removeItem("mapboxStyle"),this._actualStyle.set("theme"))}setStyle(t){let e=this._styles.find(i=>t.endsWith(i));e&&(this._actualStyle.set(t),e.includes("theme")?this._sessionService.removeItem("mapboxStyle"):this._sessionService.setItem("mapboxStyle",e))}get imgStyles(){let t=this.actualStyle();return{defaultStyle:{img:this.getMapboxImg(t),mapboxStyle:t},styles:this._styles.map(e=>({img:this.getMapboxImg(e),mapboxStyle:e}))}}getMapboxImg=t=>`img/mapbox/${t}.png`;static \u0275fac=function(e){return new(e||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})};var X=class r{_ngZone=l(V);_apiClient=l(We);_polylineService=l(xt);_stylesMapsService=l(Xe);_savedPlacesService=l(ke);_savedPlaces=k(()=>this._savedPlacesService.places());_showCoords=w(!0);showCoords=this._showCoords.asReadonly();_showSnow=w(!0);showSnow=this._showSnow.asReadonly();_showRain=w(!0);showRain=this._showRain.asReadonly();_map=w(null);map=this._map.asReadonly();_markers=w([]);_zoom=w(2);zoom=this._zoom.asReadonly();_currentLngLat=w(new ye.LngLat(-3.759884398515993,40.27393082965864));currentLngLat=this._currentLngLat.asReadonly();_dataStylesMap=w(null);dataStylesMap=this._dataStylesMap.asReadonly();constructor(){this.initialize()}initialize(){Se(()=>{this.showRain(),this.map()?.isStyleLoaded()&&this.setRain()}),Se(()=>{this.showSnow(),this.map()?.isStyleLoaded()&&this.setSnow()}),Se(()=>{let t=this._stylesMapsService.mapsStyle();this.map()?.setStyle(t)})}setRain(){let t=this.map();t&&t.setRain(this.showRain()?{density:1,intensity:1,color:"#919191",opacity:.19,"center-thinning":0,direction:[0,50],"droplet-size":[1,10],"distortion-strength":.5,vignette:.5}:null)}setSnow(){let t=this.map();if(!t)return;let e=i=>["interpolate",["linear"],["zoom"],11,0,13,i];t.setSnow(this.showSnow()?{density:e(.85),intensity:1,"center-thinning":.1,direction:[0,50],opacity:1,color:"#ffffff","flake-size":.71,vignette:e(.3),"vignette-color":"#ffffff"}:null)}showMapCoords(t){this._showCoords.set(t)}showMapRain(t){this._showRain.set(t)}showMapSnow(t){this._showSnow.set(t)}createMap(t){this._dataStylesMap.set(this._stylesMapsService.imgStyles);let e=new ye.Map({container:t?.nativeElement,style:"",center:[-74.5,40],zoom:this.zoom(),accessToken:this._apiClient.apiKey(),projection:"globe",bearing:12.8,hash:!0});this.setMap(e)}setMap(t){this._map.set(t),this.mapListeners()}mapListeners(){let t=this.map();if(!t)throw"Mapa no inicializado";t.on("zoom",e=>{this._zoom.set(t.getZoom())}),t.on("zoomend",e=>{t.getZoom()<18||t.zoomTo(18)}),t.on("move",()=>{this._currentLngLat.set(t.getCenter())}),t.on("style.load",()=>{this.setRain(),this.setSnow()})}flyTo(t,e=14){let i=this.map();!i||!t||i.flyTo({zoom:e,center:{lng:t.longitude,lat:t.latitude}})}zoomIn(){this.map()?.zoomIn()}zoomOut(){this.map()?.zoomOut()}zoomTo(t){this._zoom.set(t),this.map()?.zoomTo(t)}setStyle(t){t&&this._stylesMapsService.setStyle(t)}removeOldMarkers(){this._markers().forEach(t=>t.remove()),this._markers.set([])}getRandomColor=()=>"#xxxxxx".replace(/x/g,t=>(Math.random()*16|0).toString(16));addMarker(t,e,i=!0){let n=this.map(),{coordinates:s}=t;if(!n||!s)return null;i&&this.removeOldMarkers();let{longitude:o,latitude:a}=s,c=this.getRandomColor(),d=new ye.Marker({color:c,draggable:!1}).setLngLat(new ye.LngLat(o,a)).addTo(n);this._markers.update(v=>[...v,d]);let h=e.createComponent(wt);return h.setInput("place",t),d.getElement()?.appendChild(h.location.nativeElement),d}drawItinerary(t,e=0){let i=this.map();if(!i)return;let n=this._polylineService.decode(t.geometry),s=new ye.LngLatBounds;n.forEach(([c,d])=>{s.extend([c,d])}),i.fitBounds(s);let o={type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:n}}]}},a=this.getLayerName(e);i.getLayer(a)&&(i.removeLayer(a),i.removeSource(a)),i.addSource(a,o),i.addLayer({id:a,type:"line",source:a,layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":this.getRandomColor(),"line-width":4}})}getLayerName=t=>`Layer${t}`;removeLayers(){let t=this.map();if(!t)return;let e=0;for(;t.getLayer(this.getLayerName(e));)t.removeLayer(this.getLayerName(e)),t.removeSource(this.getLayerName(e)),e++}destroyMap(){this.map()?.remove()}static \u0275fac=function(e){return new(e||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})};var Fr=["*"];function Ar(r,t){if(r&1){let e=P();p(0,"li",5),m("click",function(){let n=y(e).$implicit,s=f(2);return b(s.flyTo(n))}),p(1,"span"),x(2),_()()}if(r&2){let e=t.$implicit;u(2),T(e.full_address)}}function Lr(r,t){if(r&1&&(p(0,"ul",3),fe(1,Ar,3,1,"li",4,Me),_()),r&2){let e=f();u(),me(e.places())}}var Pt=class r{_viewContainerRef=l(Z);_destroyRef=l(Ne);_apiClient=l(We);_mapService=l(X);_itinerariesService=l(pe);_appTranslateService=l(je);_form=w(null);_places=w([]);places=this._places.asReadonly();showList=k(()=>this.places().length);dataForm={form:{id:"siteSearch"},controls:{query:{component:wn,formFieldComponent:Cn,value:"",validators:[],args:{control:{placeholder:this._appTranslateService.get("i18n.common.placeholderSearch"),autocomplete:!1,submitFormOnDebounce:!0,debounceTimer:500,additionalClasses:"shadow-none border-0"},formField:{}},classes:{}}}};flyTo(t){this.resetSearch(),this._itinerariesService.removeItinerariesOfPlaces(),this._mapService.addMarker(t,this._viewContainerRef),this._mapService.flyTo(t.coordinates)}onSubmit(t){let{query:e}=t.content;if(!e.trim()){this.resetSearch();return}this._apiClient.getPlaces(e).pipe(vt(this._destroyRef)).subscribe(i=>{this._places.set(i)})}resetSearch(){this._places.set([]),this._form()?.controls.query.patchValue("")}onClickOutside(t){t&&this.resetSearch()}buildForm(t){this._form.set(t)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["features-mapbox-maps-searcher"]],ngContentSelectors:Fr,decls:5,vars:6,consts:[["sharedClickOutside","",1,"div-search","m-2","rounded-top-4",3,"onClickOutside"],[1,"d-flex","align-items-center","p-2"],[3,"buildForm","formSubmit","data"],[1,"list-group","overflow-y-auto"],["tabindex","1",1,"list-group-item","list-group-item-action","border-0","cursor-pointer"],["tabindex","1",1,"list-group-item","list-group-item-action","border-0","cursor-pointer",3,"click"]],template:function(e,i){e&1&&(Ee(),p(0,"div",0),m("onClickOutside",function(s){return i.onClickOutside(s)}),p(1,"div",1),Ie(2),p(3,"pato-form",2),m("buildForm",function(s){return i.buildForm(s)})("formSubmit",function(s){return i.onSubmit(s)}),_()(),I(4,Lr,3,0,"ul",3),_()),e&2&&($("rounded-bottom-4",!i.showList()),u(),$("border-bottom",i.showList()),u(2),S("data",i.dataForm),u(),B(i.showList()?4:-1))},dependencies:[le,Sn,bn],styles:[".div-search[_ngcontent-%COMP%]{position:absolute;top:0;background:var(--bs-body-bg);box-sizing:border-box;border:1px solid var(--bs-border-color)}.div-search[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{max-height:200px}"]})};function Vr(r,t){if(r&1){let e=P();p(0,"div",3)(1,"div",4)(2,"shared-image",5),m("click",function(){let n=y(e).$implicit,s=f(2);return b(s.changeMapStyle(n))}),_()()()}if(r&2){let e=t.$implicit,i=f(2);u(),$("bg-secondary",i.actualStyle()===e.mapboxStyle),u(),S("url",e.img)}}function Nr(r,t){if(r&1&&(p(0,"div",0)(1,"h3",1),x(2),R(3,"appTranslate"),_(),p(4,"div",2),fe(5,Vr,3,3,"div",3,Qi),_()()),r&2){let e,i=f();u(2),T(O(3,1,"i18n.features.mapbox.titleStyle")),u(3),me((e=i.dataStylesMap())==null?null:e.styles)}}var Rt=class r{_mapsService=l(X);_stylesMapsService=l(Xe);dataStylesMap=k(()=>this._mapsService.dataStylesMap());actualStyle=k(()=>this._stylesMapsService.actualStyle());changeMapStyle(t){this._mapsService.setStyle(t.mapboxStyle)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["features-mapbox-modal-change-map-style"]],decls:1,vars:1,consts:[[1,"container","p-4"],[1,"mb-5"],[1,"d-flex","justify-content-center","align-items-center","flex-wrap"],[1,"col","col-12","col-md-6","col-xxl-4","d-flex","justify-content-center","mb-3"],[1,"card","p-2","bg-secondary",2,"width","240px","height","100px","flex-shrink","0"],[3,"click","url"]],template:function(e,i){e&1&&I(0,Nr,7,3,"div",0),e&2&&B(i.dataStylesMap()?0:-1)},dependencies:[le,yt,we],encapsulation:2})};var Br=()=>[import("./chunk-5PB2F566.js").then(r=>r.MiniMapComponent)];function zr(r,t){if(r&1&&z(0,"features-mapbox-mini-map",14),r&2){let e=f().$implicit;S("place",e)}}function Hr(r,t){if(r&1){let e=P();p(0,"div",4)(1,"div",6)(2,"div",null,0),I(4,zr,1,1),Ki(5,4,Br),qi(2),_(),p(7,"div",7)(8,"div",8)(9,"h5",9),x(10),_(),p(11,"p",10),x(12),_()(),p(13,"div",8)(14,"div",11)(15,"shared-button",12),m("clicked",function(){let n=y(e).$implicit,s=f();return b(s.openPlace(n))}),_()(),p(16,"div",11)(17,"shared-button",13),m("clicked",function(){let n=y(e).$implicit,s=f();return b(s.removeSavedPlace(n))}),_()()()()()()}if(r&2){let e=t.$implicit;u(10),T(e.name),u(2),T(e.full_address),u(5),S("outline",!0)}}function jr(r,t){r&1&&(p(0,"div",5)(1,"div",15),z(2,"shared-image",16),p(3,"p",17),x(4),R(5,"appTranslate"),_()()()),r&2&&(u(4),T(O(5,1,"i18n.features.mapbox.emtySavePlace")))}var Mt=class r{_activeModal=l(vn);_savedPlacesService=l(ke);onOpenPlace=Re();savedPlaces=k(()=>this._savedPlacesService.places());removeSavedPlace(t){this._savedPlacesService.removePlace(t)}openPlace(t){this._activeModal.dismiss(),this.onOpenPlace.emit(t)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["features-mapbox-modal-saved-places"]],outputs:{onOpenPlace:"onOpenPlace"},decls:8,vars:4,consts:[["miniMap",""],[1,"container","p-4"],[1,"mb-5"],[1,"row","g-3"],[1,"col","col-12","col-md-6","col-xxl-4","d-flex","text-align-center","justify-content-center"],[1,"d-flex","justify-content-center","text-align-center","align-items-center","flex-wrap","p-2","h-100"],[1,"card",2,"width","18rem"],[1,"card-body"],[1,"row"],[1,"card-title"],[1,"card-text","mb-4"],[1,"col-6"],["icon","eye-fill","variant","info",3,"clicked"],["icon","trash","variant","danger",3,"clicked","outline"],[3,"place"],[1,"text-center"],["url","img/mapbox/tierra-triste.png","classes","img-fluid",2,"height","200px"],[1,"h3"]],template:function(e,i){e&1&&(p(0,"div",1)(1,"h3",2),x(2),R(3,"appTranslate"),_(),p(4,"div",3),fe(5,Hr,18,3,"div",4,Me,!1,jr,6,3,"div",5),_()()),e&2&&(u(2),T(O(3,2,"i18n.features.mapbox.titleSavedPlaces")),u(3),me(i.savedPlaces()))},dependencies:[ce,yt,we],encapsulation:2})};var Wr=["*"],Et=class r{_sessionService=l(Ce);identifier=Je.required();checkedDefualt=Je.required();_isChecked=w(!1);isChecked=this._isChecked.asReadonly();init=Re();checked=Re();ngOnInit(){this.initialize()}initialize(){let t=this._sessionService.getItem(this.identifier(),this.checkedDefualt());this._isChecked.set(t),this.checked.emit(t)}onChange(t){let e=t.currentTarget.checked;this._sessionService.setItem(this.identifier(),e),this._isChecked.set(e),this.checked.emit(e)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["features-mapbox-checkbox"]],inputs:{identifier:[1,"identifier"],checkedDefualt:[1,"checkedDefualt"]},outputs:{init:"init",checked:"checked"},ngContentSelectors:Wr,decls:4,vars:3,consts:[[1,"form-check","mb-3"],["type","checkbox",1,"form-check-input",3,"change","id"],[1,"form-check-label",3,"for"]],template:function(e,i){e&1&&(Ee(),p(0,"div",0)(1,"input",1),m("change",function(s){return i.onChange(s)}),_(),p(2,"label",2),Ie(3),_()()),e&2&&(u(),S("id",i.identifier()),Q("checked",i.isChecked()?"checked":null),u(),S("for",i.identifier()))},encapsulation:2})};var Xr=["*"],It=class r{_destroyRef=l(Ne);_viewContainerRef=l(Z);_modalService=l(kn);_mapsService=l(X);openPlace=Re();zoom=k(()=>this._mapsService.zoom());showRain=k(()=>this._mapsService.showRain());showSnow=k(()=>this._mapsService.showSnow());openModalChangeMapStyle(){this._modalService.open({component:Rt,destroyRef:this._destroyRef,options:{animation:!0,centered:!0,size:"lg",scrollable:!0}})}openModalSavedPlaces(){let t=this._modalService.open({component:Mt,destroyRef:this._destroyRef,args:{onOpenPlace:e=>{this.openPlace.emit(e),this._mapsService.addMarker(e,this._viewContainerRef),this._mapsService.flyTo(e.coordinates)}},options:{animation:!0,centered:!0,size:"lg",scrollable:!0}})}onShowCoords(t){this._mapsService.showMapCoords(t)}onShowRain(t){this._mapsService.showMapRain(t)}onShowSnow(t){this._mapsService.showMapSnow(t)}zoomIn(){this._mapsService.zoomIn()}zoomOut(){this._mapsService.zoomOut()}zoomChanged(t){this._mapsService.zoomTo(Number(t))}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["features-mapbox-side-menu"]],outputs:{openPlace:"openPlace"},ngContentSelectors:Xr,decls:33,vars:31,consts:[["zoomInput",""],[1,"row","align-items-center","w-100","p-2"],[1,"col-6"],[1,"col-6","d-flex","justify-content-end","p-0"],[1,"col-12"],[1,"floating-range"],[1,"floating-content","mb-3"],[1,"form-label"],[1,"d-flex","justify-content-center","align-items-center","g-3"],["icon","dash","additionalClasses","p-0",3,"clicked","fontSizeIcon"],["type","range","min","-2","max","18",1,"form-range","px-2",3,"input","value"],["icon","plus","additionalClasses","p-0",3,"clicked","fontSizeIcon"],["identifier","show-coords",3,"checked","checkedDefualt"],["identifier","show-rain",3,"checked","checkedDefualt"],["identifier","show-snow",3,"checked","checkedDefualt"],[1,"mb-3"],["icon","brush","variant","success",3,"clicked","label"],["icon","bookmarks",3,"clicked","label"]],template:function(e,i){if(e&1){let n=P();Ee(),p(0,"div",1)(1,"div",2),x(2),R(3,"appTranslate"),_(),p(4,"div",3),Ie(5),_(),p(6,"div",4)(7,"div",5)(8,"div",6)(9,"span",7),x(10),R(11,"appTranslate"),R(12,"number"),_(),p(13,"div",8)(14,"shared-button",9),m("clicked",function(){return y(n),b(i.zoomOut())}),_(),p(15,"input",10,0),m("input",function(){y(n);let o=it(16);return b(i.zoomChanged(o.value))}),_(),p(17,"shared-button",11),m("clicked",function(){return y(n),b(i.zoomIn())}),_()()(),p(18,"features-mapbox-checkbox",12),m("checked",function(o){return y(n),b(i.onShowCoords(o))}),x(19),R(20,"appTranslate"),_(),p(21,"features-mapbox-checkbox",13),m("checked",function(o){return y(n),b(i.onShowRain(o))}),x(22),R(23,"appTranslate"),_(),p(24,"features-mapbox-checkbox",14),m("checked",function(o){return y(n),b(i.onShowSnow(o))}),x(25),R(26,"appTranslate"),_(),p(27,"div",15)(28,"shared-button",16),R(29,"appTranslate"),m("clicked",function(){return y(n),b(i.openModalChangeMapStyle())}),_()(),p(30,"div")(31,"shared-button",17),R(32,"appTranslate"),m("clicked",function(){return y(n),b(i.openModalSavedPlaces())}),_()()()()()}e&2&&(u(2),T(O(3,14,"i18n.features.mapbox.appName")),u(8),nn("",O(11,16,"i18n.features.mapbox.zoom"),": ",gt(12,18,i.zoom(),"2.2-2"),""),u(4),S("fontSizeIcon",3),u(),S("value",i.zoom()),u(2),S("fontSizeIcon",3),u(),S("checkedDefualt",!0),u(),ze(" ",O(20,21,"i18n.features.mapbox.showCoords")," "),u(2),S("checkedDefualt",!1),u(),ze(" ",O(23,23,"i18n.features.mapbox.rain")," "),u(2),S("checkedDefualt",!1),u(),ze(" ",O(26,25,"i18n.features.mapbox.snow")," "),u(3),S("label",O(29,27,"i18n.features.mapbox.btnChangeStyle")),u(3),S("label",O(32,29,"i18n.features.mapbox.btnSavedPlaces")))},dependencies:[le,fn,ce,we,Et],encapsulation:2})};var Zr=20,Tt=(()=>{class r{_ngZone=l(V);_platform=l(Te);_renderer=l(ee).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new g;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=Zr){return this._platform.isBrowser?new Ke(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let n=e>0?this._scrolled.pipe(Wt(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):qe()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let n=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(pt(s=>!s||n.indexOf(s)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((n,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_scrollableContainsElement(e,i){let n=he(i),s=e.getElementRef().nativeElement;do if(n==s)return!0;while(n=n.parentElement);return!1}static \u0275fac=function(i){return new(i||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Gr=20,ot=(()=>{class r{_platform=l(Te);_listeners;_viewportSize;_change=new g;_document=l(ie,{optional:!0});constructor(){let e=l(V),i=l(ee).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let n=s=>this._change.next(s);this._listeners=[i.listen("window","resize",n),i.listen("window","orientationchange",n)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+i,height:n,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),n=e.documentElement,s=n.getBoundingClientRect(),o=-s.top||e.body.scrollTop||i.scrollY||n.scrollTop||0,a=-s.left||e.body.scrollLeft||i.scrollX||n.scrollLeft||0;return{top:o,left:a}}change(e=Gr){return e>0?this._change.pipe(Wt(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Jt=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=ae({type:r});static \u0275inj=se({})}return r})(),ti=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=ae({type:r});static \u0275inj=se({imports:[rt,Jt,rt,Jt]})}return r})();function Un(r){let t=r.cloneNode(!0),e=t.querySelectorAll("[id]"),i=r.nodeName.toLowerCase();t.removeAttribute("id");for(let n=0;n<e.length;n++)e[n].removeAttribute("id");return i==="canvas"?Ln(r,t):(i==="input"||i==="select"||i==="textarea")&&An(r,t),Fn("canvas",r,t,Ln),Fn("input, textarea, select",r,t,An),t}function Fn(r,t,e,i){let n=t.querySelectorAll(r);if(n.length){let s=e.querySelectorAll(r);for(let o=0;o<n.length;o++)i(n[o],s[o])}}var $r=0;function An(r,t){t.type!=="file"&&(t.value=r.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${$r++}`)}function Ln(r,t){let e=t.getContext("2d");if(e)try{e.drawImage(r,0,0)}catch{}}function ci(r){let t=r.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function ri(r,t,e){let{top:i,bottom:n,left:s,right:o}=r;return e>=i&&e<=n&&t>=s&&t<=o}function ct(r,t,e){r.top+=t,r.bottom=r.top+r.height,r.left+=e,r.right=r.left+r.width}function Vn(r,t,e,i){let{top:n,right:s,bottom:o,left:a,width:c,height:d}=r,h=c*t,v=d*t;return i>n-v&&i<o+v&&e>a-h&&e<s+h}var Ot=class{_document;positions=new Map;constructor(t){this._document=t}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:ci(e)})})}handleScroll(t){let e=de(t),i=this.positions.get(e);if(!i)return null;let n=i.scrollPosition,s,o;if(e===this._document){let d=this.getViewportScrollPosition();s=d.top,o=d.left}else s=e.scrollTop,o=e.scrollLeft;let a=n.top-s,c=n.left-o;return this.positions.forEach((d,h)=>{d.clientRect&&e!==h&&e.contains(h)&&ct(d.clientRect,a,c)}),n.top=s,n.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function Kn(r,t){let e=r.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let i=t.createElement("div");return e.forEach(n=>i.appendChild(n)),i}function di(r,t,e){for(let i in t)if(t.hasOwnProperty(i)){let n=t[i];n?r.setProperty(i,n,e?.has(i)?"important":""):r.removeProperty(i)}return r}function Ze(r,t){let e=t?"":"none";di(r.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Nn(r,t,e){di(r.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function Ft(r,t){return t&&t!="none"?r+" "+t:r}function Bn(r,t){r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.style.transform=At(t.left,t.top)}function At(r,t){return`translate3d(${Math.round(r)}px, ${Math.round(t)}px, 0)`}function zn(r){let t=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*t}function Ur(r){let t=getComputedStyle(r),e=ii(t,"transition-property"),i=e.find(a=>a==="transform"||a==="all");if(!i)return 0;let n=e.indexOf(i),s=ii(t,"transition-duration"),o=ii(t,"transition-delay");return zn(s[n])+zn(o[n])}function ii(r,t){return r.getPropertyValue(t).split(",").map(i=>i.trim())}var Kr=new Set(["position"]),si=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(t,e,i,n,s,o,a,c,d,h){this._document=t,this._rootElement=e,this._direction=i,this._initialDomRect=n,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=d,this._renderer=h}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),Hn(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return Ur(this._preview)}addEventListener(t,e){return this._renderer.listen(this._preview,t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,i=t?t.template:null,n;if(i&&t){let s=t.matchSize?this._initialDomRect:null,o=t.viewContainer.createEmbeddedView(i,t.context);o.detectChanges(),n=Kn(o,this._document),this._previewEmbeddedView=o,t.matchSize?Bn(n,s):n.style.transform=At(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=Un(this._rootElement),Bn(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return di(n.style,{"pointer-events":"none",margin:Hn(n)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},Kr),Ze(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("popover","manual"),n.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>n.classList.add(s)):n.classList.add(e)),n}};function Hn(r){return"showPopover"in r}var qr={passive:!0},jn={passive:!1},Qr={passive:!1,capture:!0},Jr=800,Wn=new Set(["position"]),oi=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=w(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new g;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=re.EMPTY;_pointerUpSubscription=re.EMPTY;_scrollSubscription=re.EMPTY;_resizeSubscription=re.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>Ze(e,t)))}_disabled=!1;beforeStarted=new g;started=new g;released=new g;ended=new g;entered=new g;exited=new g;dropped=new g;moved=this._moveEvents;data;constrainPosition;constructor(t,e,i,n,s,o,a){this._config=e,this._document=i,this._ngZone=n,this._viewportRuler=s,this._dragDropRegistry=o,this._renderer=a,this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new Ot(i),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>he(i)),this._handles.forEach(i=>Ze(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=he(t);return e!==this._rootElement&&(this._removeRootElementListeners(),this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[U(this._renderer,e,"mousedown",this._pointerDown,jn),U(this._renderer,e,"touchstart",this._pointerDown,qr),U(this._renderer,e,"dragstart",this._nativeDragStart,jn)]),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?he(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),Ze(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),Ze(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)};_pointerMove=t=>{let e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging()){let n=Math.abs(e.x-this._pickupPositionOnPage.x),s=Math.abs(e.y-this._pickupPositionOnPage.y);if(n+s>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),c=this._dropContainer;if(!a){this._endDragSequence(t);return}(!c||!c.isDragging()&&!c.isReceiving())&&(t.cancelable&&t.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(t)))}return}t.cancelable&&t.preventDefault();let i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{let n=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,s=this._activeTransform;s.x=i.x-n.x+this._passiveTransform.x,s.y=i.y-n.y+this._passiveTransform.y,this._applyRootElementTransform(s.x,s.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=t=>{this._endDragSequence(t)};_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){at(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=U(this._renderer,e,"selectstart",es,Qr)}),i){let n=this._rootElement,s=n.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");s.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=new si(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(s,e)),Nn(n,!1,Wn),this._document.body.appendChild(s.replaceChild(o,n)),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),n=at(e),s=!n&&e.button!==0,o=this._rootElement,a=de(e),c=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+Jr>Date.now(),d=n?Dn(e):xn(e);if(a&&a.draggable&&e.type==="mousedown"&&e.preventDefault(),i||s||c||d)return;if(this._handles.length){let E=o.style;this._rootElementTapHighlight=E.webkitTapHighlightColor||"",E.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(E=>this._updateOnScroll(E)),this._boundaryElement&&(this._boundaryRect=ci(this._boundaryElement));let h=this._previewTemplate;this._pickupPositionInElement=h&&h.template&&!h.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let v=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:v.x,y:v.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){Nn(this._rootElement,!0,Wn),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),n=this._getPointerPositionOnPage(t),s=this._getDragDistance(n),o=e._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:s,dropPoint:n,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:n,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,o,s,n,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:n}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,n),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let n=a=>{(!a||this._preview&&de(a)===this._preview.element&&a.propertyName==="transform")&&(o(),i(),clearTimeout(s))},s=setTimeout(n,e*1.5),o=this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=Kn(this._placeholderRef,this._document)):i=Un(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){let n=e===this._rootElement?null:e,s=n?n.getBoundingClientRect():t,o=at(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),c=o.pageX-s.left-a.left,d=o.pageY-s.top-a.top;return{x:s.left-t.left+c,y:s.top-t.top+d}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),i=at(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,n=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let a=this._ownerSVGElement.createSVGPoint();return a.x=n,a.y=s,a.matrixTransform(o.inverse())}}return{x:n,y:s}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:n}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:d}=this._getPreviewRect(),h=a.top+o,v=a.bottom-(d-o),E=a.left+s,N=a.right-(c-s);i=Yn(i,E,N),n=Yn(n,h,v)}return{x:i,y:n}}_updatePointerDirectionDelta(t){let{x:e,y:i}=t,n=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-s.x),a=Math.abs(i-s.y);return o>this._config.pointerDirectionChangeThreshold&&(n.x=e>s.x?1:-1,s.x=e),a>this._config.pointerDirectionChangeThreshold&&(n.y=i>s.y?1:-1,s.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,Ze(this._rootElement,t))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(t=>t()),this._rootElementCleanups=void 0}_applyRootElementTransform(t,e){let i=1/this.scale,n=At(t*i,e*i),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=Ft(n,this._initialTransform)}_applyPreviewTransform(t,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,n=At(t,e);this._preview.setTransform(Ft(n,i))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(n.width===0&&n.height===0||i.width===0&&i.height===0)return;let s=n.left-i.left,o=i.right-n.right,a=n.top-i.top,c=i.bottom-n.bottom;n.width>i.width?(s>0&&(t+=s),o>0&&(t-=o)):t=0,n.height>i.height?(a>0&&(e+=a),c>0&&(e-=c)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:at(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let i=de(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&ct(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=bt(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let n=this._document;return e||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return he(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=t=>{if(this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&t.preventDefault()}else this.disabled||t.preventDefault()};_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}};function Yn(r,t,e){return Math.max(t,Math.min(e,r))}function at(r){return r.type[0]==="t"}function es(r){r.preventDefault()}function qn(r,t,e){let i=Xn(t,r.length-1),n=Xn(e,r.length-1);if(i===n)return;let s=r[i],o=n<i?-1:1;for(let a=i;a!==n;a+=o)r[a]=r[a+o];r[n]=s}function Xn(r,t){return Math.max(0,Math.min(t,r))}var Lt=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(t){this._dragDropRegistry=t}_previousSwap={drag:null,delta:0,overlaps:!1};start(t){this.withItems(t)}sort(t,e,i,n){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,i,n);if(o===-1&&s.length>0)return null;let a=this.orientation==="horizontal",c=s.findIndex(j=>j.drag===t),d=s[o],h=s[c].clientRect,v=d.clientRect,E=c>o?1:-1,N=this._getItemOffsetPx(h,v,E),H=this._getSiblingOffsetPx(c,s,E),K=s.slice();return qn(s,c,o),s.forEach((j,Rr)=>{if(K[Rr]===j)return;let Ii=j.drag===t,zt=Ii?N:H,Ti=Ii?t.getPlaceholderElement():j.drag.getRootElement();j.offset+=zt;let Oi=Math.round(j.offset*(1/j.drag.scale));a?(Ti.style.transform=Ft(`translate3d(${Oi}px, 0, 0)`,j.initialTransform),ct(j.clientRect,0,zt)):(Ti.style.transform=Ft(`translate3d(0, ${Oi}px, 0)`,j.initialTransform),ct(j.clientRect,zt,0))}),this._previousSwap.overlaps=ri(v,e,i),this._previousSwap.drag=d.drag,this._previousSwap.delta=a?n.x:n.y,{previousIndex:c,currentIndex:o}}enter(t,e,i,n){let s=n==null||n<0?this._getItemIndexFromPointerPosition(t,e,i):n,o=this._activeDraggables,a=o.indexOf(t),c=t.getPlaceholderElement(),d=o[s];if(d===t&&(d=o[s+1]),!d&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(d=o[0]),a>-1&&o.splice(a,1),d&&!this._dragDropRegistry.isDragging(d)){let h=d.getRootElement();h.parentElement.insertBefore(c,h),o.splice(s,0,t)}else this._element.appendChild(c),o.push(t);c.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let i=this._itemPositions.find(n=>n.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{ct(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:ci(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){let n=this.orientation==="horizontal",s=n?e.left-t.left:e.top-t.top;return i===-1&&(s+=n?e.width-t.width:e.height-t.height),s}_getSiblingOffsetPx(t,e,i){let n=this.orientation==="horizontal",s=e[t].clientRect,o=e[t+i*-1],a=s[n?"width":"height"]*i;if(o){let c=n?"left":"top",d=n?"right":"bottom";i===-1?a-=o.clientRect[c]-s[d]:a+=s[c]-o.clientRect[d]}return a}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,n=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let o=i[i.length-1].clientRect;return n?t>=o.right:e>=o.bottom}else{let o=i[0].clientRect;return n?t<=o.left:e<=o.top}}_getItemIndexFromPointerPosition(t,e,i,n){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===t)return!1;if(n){let d=s?n.x:n.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&d===this._previousSwap.delta)return!1}return s?e>=Math.floor(c.left)&&e<Math.floor(c.right):i>=Math.floor(c.top)&&i<Math.floor(c.bottom)});return o===-1||!this._sortPredicate(o,t)?-1:o}},ai=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(t,e){this._document=t,this._dragDropRegistry=e}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let n=e[i];this._relatedNodes.push([n,n.nextSibling])}this.withItems(t)}sort(t,e,i,n){let s=this._getItemIndexFromPointerPosition(t,e,i),o=this._previousSwap;if(s===-1||this._activeItems[s]===t)return null;let a=this._activeItems[s];if(o.drag===a&&o.overlaps&&o.deltaX===n.x&&o.deltaY===n.y)return null;let c=this.getItemIndex(t),d=t.getPlaceholderElement(),h=a.getRootElement();s>c?h.after(d):h.before(d),qn(this._activeItems,c,s);let v=this._getRootNode().elementFromPoint(e,i);return o.deltaX=n.x,o.deltaY=n.y,o.drag=a,o.overlaps=h===v||h.contains(v),{previousIndex:c,currentIndex:s}}enter(t,e,i,n){let s=n==null||n<0?this._getItemIndexFromPointerPosition(t,e,i):n;s===-1&&(s=this._getClosestItemIndexToPointer(t,e,i));let o=this._activeItems[s],a=this._activeItems.indexOf(t);a>-1&&this._activeItems.splice(a,1),o&&!this._dragDropRegistry.isDragging(o)?(this._activeItems.splice(s,0,t),o.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[n,s]=this._relatedNodes[i];n.parentNode===t&&n.nextSibling!==s&&(s===null?t.appendChild(n):s.parentNode===t&&t.insertBefore(n,s))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,i){let n=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),s=n?this._activeItems.findIndex(o=>{let a=o.getRootElement();return n===a||a.contains(n)}):-1;return s===-1||!this._sortPredicate(s,t)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=bt(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let n=1/0,s=-1;for(let o=0;o<this._activeItems.length;o++){let a=this._activeItems[o];if(a!==t){let{x:c,y:d}=a.getRootElement().getBoundingClientRect(),h=Math.hypot(e-c,i-d);h<n&&(n=h,s=o)}}return s}},Zn=.05,Qn=.05,J=function(r){return r[r.NONE=0]="NONE",r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r}(J||{}),Y=function(r){return r[r.NONE=0]="NONE",r[r.LEFT=1]="LEFT",r[r.RIGHT=2]="RIGHT",r}(Y||{}),li=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new g;entered=new g;exited=new g;dropped=new g;sorted=new g;receivingStarted=new g;receivingStopped=new g;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=re.EMPTY;_verticalScrollDirection=J.NONE;_horizontalScrollDirection=Y.NONE;_scrollNode;_stopScrollTimers=new g;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(t,e,i,n,s){this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=s;let o=this.element=he(t);this._document=i,this.withOrientation("vertical").withElementContainer(o),e.registerDropContainer(this),this._parentPositions=new Ot(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,n){this._draggingStarted(),n==null&&this.sortingDisabled&&(n=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,n,s,o,a,c={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:n,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(n=>n.isDragging()).every(n=>t.indexOf(n)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof Lt&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new ai(this._document,this._dragDropRegistry);else{let e=new Lt(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=he(this.element),i=this._scrollableElements.indexOf(this._container),n=this._scrollableElements.indexOf(t);return i>-1&&this._scrollableElements.splice(i,1),n>-1&&this._scrollableElements.splice(n,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,n){if(this.sortingDisabled||!this._domRect||!Vn(this._domRect,Zn,e,i))return;let s=this._sortStrategy.sort(t,e,i,n);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,n=J.NONE,s=Y.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||i||Vn(o.clientRect,Zn,t,e)&&([n,s]=ts(a,o.clientRect,this._direction,t,e),(n||s)&&(i=a))}),!n&&!s){let{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};n=Jn(c,e),s=er(c,t),i=window}i&&(n!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=s,this._scrollNode=i,(n||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Bi(0,jt).pipe(A(this._stopScrollTimers)).subscribe(()=>{let t=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===J.UP?t.scrollBy(0,-e):this._verticalScrollDirection===J.DOWN&&t.scrollBy(0,e),this._horizontalScrollDirection===Y.LEFT?t.scrollBy(-e,0):this._horizontalScrollDirection===Y.RIGHT&&t.scrollBy(e,0)})};_isOverContainer(t,e){return this._domRect!=null&&ri(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(n=>n._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._domRect||!ri(this._domRect,e,i)||!this.enterPredicate(t,this))return!1;let n=this._getShadowRoot().elementFromPoint(e,i);return n?n===this._container||this._container.contains(n):!1}_startReceiving(t,e){let i=this._activeSiblings;!i.has(t)&&e.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=bt(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function Jn(r,t){let{top:e,bottom:i,height:n}=r,s=n*Qn;return t>=e-s&&t<=e+s?J.UP:t>=i-s&&t<=i+s?J.DOWN:J.NONE}function er(r,t){let{left:e,right:i,width:n}=r,s=n*Qn;return t>=e-s&&t<=e+s?Y.LEFT:t>=i-s&&t<=i+s?Y.RIGHT:Y.NONE}function ts(r,t,e,i,n){let s=Jn(t,n),o=er(t,i),a=J.NONE,c=Y.NONE;if(s){let d=r.scrollTop;s===J.UP?d>0&&(a=J.UP):r.scrollHeight-d>r.clientHeight&&(a=J.DOWN)}if(o){let d=r.scrollLeft;e==="rtl"?o===Y.RIGHT?d<0&&(c=Y.RIGHT):r.scrollWidth+d>r.clientWidth&&(c=Y.LEFT):o===Y.LEFT?d>0&&(c=Y.LEFT):r.scrollWidth-d>r.clientWidth&&(c=Y.RIGHT)}return[a,c]}var lt={capture:!0},ni={passive:!1,capture:!0},is=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=D({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,n){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}"],encapsulation:2,changeDetection:0})}return r})(),tr=(()=>{class r{_ngZone=l(V);_document=l(ie);_styleLoader=l(nt);_renderer=l(ee).createRenderer(null,null);_cleanupDocumentTouchmove;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=w([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new g;pointerUp=new g;scroll=new g;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=U(this._renderer,this._document,"touchmove",this._persistentTouchmoveListener,ni)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(is),this._activeDragInstances.update(n=>[...n,e]),this._activeDragInstances().length===1)){let n=i.type.startsWith("touch"),s=a=>this.pointerUp.next(a),o=[["scroll",a=>this.scroll.next(a),lt],["selectstart",this._preventDefaultWhileDragging,ni]];n?o.push(["touchend",s,lt],["touchcancel",s,lt]):o.push(["mouseup",s,lt]),n||o.push(["mousemove",a=>this.pointerMove.next(a),ni]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=o.map(([a,c,d])=>U(this._renderer,this._document,a,c,d))})}}stopDragging(e){this._activeDragInstances.update(i=>{let n=i.indexOf(e);return n>-1?(i.splice(n,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this.scroll];return e&&e!==this._document&&i.push(new Ke(n=>this._ngZone.runOutsideAngular(()=>{let s=U(this._renderer,e,"scroll",o=>{this._activeDragInstances().length&&n.next(o)},lt);return()=>{s()}}))),_e(...i)}registerDirectiveNode(e,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,i)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(i){return new(i||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ns={dragStartThreshold:5,pointerDirectionChangeThreshold:5},ir=(()=>{class r{_document=l(ie);_ngZone=l(V);_viewportRuler=l(ot);_dragDropRegistry=l(tr);_renderer=l(ee).createRenderer(null,null);constructor(){}createDrag(e,i=ns){return new oi(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new li(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Gn=new W("CDK_DRAG_PARENT");var rs=new W("CdkDragHandle");var nr=new W("CDK_DRAG_CONFIG"),rr=new W("CdkDropList"),sr=(()=>{class r{element=l(q);dropContainer=l(rr,{optional:!0,skipSelf:!0});_ngZone=l(V);_viewContainerRef=l(Z);_dir=l(ve,{optional:!0});_changeDetectorRef=l(He);_selfHandle=l(rs,{optional:!0,self:!0});_parentDrag=l(Gn,{optional:!0,skipSelf:!0});_dragDropRegistry=l(tr);_destroyed=new g;_handles=new Ai([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new L;released=new L;ended=new L;entered=new L;exited=new L;dropped=new L;moved=new Ke(e=>{let i=this._dragRef.moved.pipe(Li(n=>({source:this,pointerPosition:n.pointerPosition,event:n.event,delta:n.delta,distance:n.distance}))).subscribe(e);return()=>{i.unsubscribe()}});_injector=l(oe);constructor(){let e=this.dropContainer,i=l(nr,{optional:!0}),n=l(ir);this._dragRef=n.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),e&&(this._dragRef._withDropContainer(e._dropListRef),e.addItem(this),e._dropListRef.beforeStarted.pipe(A(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){et(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let i=e.rootElementSelector,n=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let i=this._handles.getValue();i.push(e),this._handles.next(i)}_removeHandle(e){let i=this._handles.getValue(),n=i.indexOf(e);n>-1&&(i.splice(n,1),this._handles.next(i))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,i=e;this.rootElementSelector&&(i=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):he(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let i=this._dir,n=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof n=="object"&&n?n:St(n),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(ji(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let n=this._dragDropRegistry.getDragDirectiveForNode(i);if(n){e.withParent(n._dragRef);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){let{lockAxis:i,dragStartDelay:n,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:d,previewContainer:h}=e;this.disabled=c??!1,this.dragStartDelay=n||0,i&&(this.lockAxis=i),s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),d&&(this.rootElementSelector=d),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.pipe(ut(e=>{let i=e.map(n=>n.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),Qe(e=>_e(...e.map(i=>i._stateChanges.pipe(be(i))))),A(this._destroyed)).subscribe(e=>{let i=this._dragRef,n=e.element.nativeElement;e.disabled?i.disableHandle(n):i.enableHandle(n)})}static \u0275fac=function(i){return new(i||r)};static \u0275dir=G({type:r,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,n){i&2&&$("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",ge],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",ln]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[te([{provide:Gn,useExisting:r}]),Le]})}return r})(),$n=new W("CdkDropListGroup");var or=(()=>{class r{element=l(q);_changeDetectorRef=l(He);_scrollDispatcher=l(Tt);_dir=l(ve,{optional:!0});_group=l($n,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new g;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=l(Oe).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;dropped=new L;entered=new L;exited=new L;sorted=new L;_unsortedItems=new Set;constructor(){let e=l(ir),i=l(nr,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,i&&this._assignDefaults(i),this._dropListRef.enterPredicate=(n,s)=>this.enterPredicate(n.data,s.data),this._dropListRef.sortPredicate=(n,s,o)=>this.sortPredicate(n,s.data,o.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),r._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef))}removeItem(e){if(this._unsortedItems.delete(e),this._latestSortedRefs){let i=this._latestSortedRefs.indexOf(e._dragRef);i>-1&&(this._latestSortedRefs.splice(i,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=r._dropLists.indexOf(this);e>-1&&r._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(be(this._dir.value),A(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{let i=st(this.connectedTo).map(n=>{if(typeof n=="string"){let s=r._dropLists.find(o=>o.id===n);return s}return n});if(this._group&&this._group._items.forEach(n=>{i.indexOf(n)===-1&&i.push(n)}),!this._scrollableParentsResolved){let n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let n=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(n)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=St(this.autoScrollStep,2),e.connectedTo(i.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(i=>i._dragRef)),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),_e(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:i,draggingDisabled:n,sortingDisabled:s,listAutoScrollDisabled:o,listOrientation:a}=e;this.disabled=n??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=o??!1,this.orientation=a||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(e){this._latestSortedRefs=e,this._dropListRef.withItems(e)}static \u0275fac=function(i){return new(i||r)};static \u0275dir=G({type:r,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,n){i&2&&(Q("id",n.id),$("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",ge],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",ge],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",ge],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[te([{provide:$n,useValue:void 0},{provide:rr,useExisting:r}])]})}return r})();var dt=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},hi=class extends dt{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(t,e,i,n,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.projectableNodes=s}},Ge=class extends dt{templateRef;viewContainerRef;context;injector;constructor(t,e,i,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},pi=class extends dt{element;constructor(t){super(),this.element=t instanceof q?t.nativeElement:t}},ui=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof hi)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Ge)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof pi)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Vt=class extends ui{outletElement;_appRef;_defaultInjector;_document;constructor(t,e,i,n,s){super(),this.outletElement=t,this._appRef=i,this._defaultInjector=n,this._document=s}attachComponentPortal(t){let e;if(t.viewContainerRef){let i=t.injector||t.viewContainerRef.injector,n=i.get($i,null,{optional:!0})||void 0;e=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:i,ngModuleRef:n,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{let i=this._appRef,n=t.injector||this._defaultInjector||oe.NULL,s=n.get(mt,i.injector);e=hn(t.component,{elementInjector:n,environmentInjector:s,projectableNodes:t.projectableNodes||void 0}),i.attachView(e.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=t,e}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(n=>this.outletElement.appendChild(n)),i.detectChanges(),this.setDisposeFn(()=>{let n=e.indexOf(i);n!==-1&&e.remove(n)}),this._attachedPortal=t,i}attachDomPortal=t=>{let e=t.element;e.parentNode;let i=this._document.createComment("dom-portal");e.parentNode.insertBefore(i,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var ar=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=ae({type:r});static \u0275inj=se({})}return r})();var lr=Pn(),_i=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,e){this._viewportRuler=t,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=M(-this._previousScrollPosition.left),t.style.top=M(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,n=e.style,s=i.scrollBehavior||"",o=n.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),lr&&(i.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),lr&&(i.scrollBehavior=s,n.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var fi=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,e,i,n){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=n}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(pt(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},Nt=class{enable(){}disable(){}attach(){}};function mi(r,t){return t.some(e=>{let i=r.bottom<e.top,n=r.top>e.bottom,s=r.right<e.left,o=r.left>e.right;return i||n||s||o})}function cr(r,t){return t.some(e=>{let i=r.top<e.top,n=r.bottom>e.bottom,s=r.left<e.left,o=r.right>e.right;return i||n||s||o})}var gi=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,e,i,n){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=n}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:n}=this._viewportRuler.getViewportSize();mi(e,[{width:i,height:n,bottom:n,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},ss=(()=>{class r{_scrollDispatcher=l(Tt);_viewportRuler=l(ot);_ngZone=l(V);_document=l(ie);constructor(){}noop=()=>new Nt;close=e=>new fi(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new _i(this._viewportRuler,this._document);reposition=e=>new gi(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(i){return new(i||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ht=class{positionStrategy;scrollStrategy=new Nt;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var vi=class{connectionPair;scrollableViewProperties;constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var fr=(()=>{class r{_attachedOverlays=[];_document=l(ie);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),os=(()=>{class r extends fr{_ngZone=l(V);_renderer=l(ee).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let i=this._attachedOverlays;for(let n=i.length-1;n>-1;n--)if(i[n]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[n]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(n){return(e||(e=Ve(r)))(n||r)}})();static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),as=(()=>{class r extends fr{_platform=l(Te);_ngZone=l(V);_renderer=l(ee).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let i=this._document.body,n={capture:!0};this._cleanups=this._ngZone.runOutsideAngular(()=>[U(this._renderer,i,"pointerdown",this._pointerDownListener,n),U(this._renderer,i,"click",this._clickListener,n),U(this._renderer,i,"auxclick",this._clickListener,n),U(this._renderer,i,"contextmenu",this._clickListener,n)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=de(e)};_clickListener=e=>{let i=de(e),n=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let s=this._attachedOverlays.slice();for(let o=s.length-1;o>-1;o--){let a=s[o];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(dr(a.overlayElement,i)||dr(a.overlayElement,n))break;let c=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(e)):c.next(e)}};static \u0275fac=(()=>{let e;return function(n){return(e||(e=Ve(r)))(n||r)}})();static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function dr(r,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===r)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var mr=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=D({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,n){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return r})(),gr=(()=>{class r{_platform=l(Te);_containerElement;_document=l(ie);_styleLoader=l(nt);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||qt()){let n=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<n.length;s++)n[s].remove()}let i=this._document.createElement("div");i.classList.add(e),qt()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(mr)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),yi=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(t,e,i,n){this._renderer=e,this._ngZone=i,this.element=t.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",n)}detach(){this._ngZone.runOutsideAngular(()=>{let t=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),t.style.pointerEvents="none",t.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},bi=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new g;_attachments=new g;_detachments=new g;_positionStrategy;_scrollStrategy;_locationChanges=re.EMPTY;_backdropRef=null;_previousHostParent;_keydownEvents=new g;_outsidePointerEvents=new g;_renders=new g;_afterRenderRef;_afterNextRenderRef;constructor(t,e,i,n,s,o,a,c,d,h=!1,v,E){this._portalOutlet=t,this._host=e,this._pane=i,this._config=n,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=d,this._animationsDisabled=h,this._injector=v,this._renderer=E,n.scrollStrategy&&(this._scrollStrategy=n.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=n.positionStrategy,this._afterRenderRef=cn(()=>Xi(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=et(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=ue(ue({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Ht(ue({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=M(this._config.width),t.height=M(this._config.height),t.minWidth=M(this._config.minWidth),t.minHeight=M(this._config.minHeight),t.maxWidth=M(this._config.maxWidth),t.maxHeight=M(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new yi(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(t))}):this._backdropRef.element.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(t,e,i){let n=st(e||[]).filter(s=>!!s);n.length&&(i?t.classList.add(...n):t.classList.remove(...n))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(A(_e(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t?.disable(),t?.detach?.()}},hr="cdk-overlay-connected-position-bounding-box",ls=/([A-Za-z%]+)$/,Si=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new g;_resizeSubscription=re.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,e,i,n,s){this._viewportRuler=e,this._document=i,this._platform=n,this._overlayContainer=s,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(hr),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,n=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,n,a),d=this._getOverlayPoint(c,e,a),h=this._getOverlayFit(d,e,i,a);if(h.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(h,d,i)){s.push({position:a,origin:c,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<h.visibleArea)&&(o={overlayFit:h,overlayPoint:d,originPoint:c,position:a,overlayRect:e})}if(s.length){let a=null,c=-1;for(let d of s){let h=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);h>c&&(c=h,a=d)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ae(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(hr),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let n;if(i.originX=="center")n=t.left+t.width/2;else{let o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;n=i.originX=="start"?o:a}e.left<0&&(n-=e.left);let s;return i.originY=="center"?s=t.top+t.height/2:s=i.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:n,y:s}}_getOverlayPoint(t,e,i){let n;i.overlayX=="center"?n=-e.width/2:i.overlayX==="start"?n=this._isRtl()?-e.width:0:n=this._isRtl()?0:-e.width;let s;return i.overlayY=="center"?s=-e.height/2:s=i.overlayY=="top"?0:-e.height,{x:t.x+n,y:t.y+s}}_getOverlayFit(t,e,i,n){let s=ur(e),{x:o,y:a}=t,c=this._getOffset(n,"x"),d=this._getOffset(n,"y");c&&(o+=c),d&&(a+=d);let h=0-o,v=o+s.width-i.width,E=0-a,N=a+s.height-i.height,H=this._subtractOverflows(s.width,h,v),K=this._subtractOverflows(s.height,E,N),j=H*K;return{visibleArea:j,isCompletelyWithinViewport:s.width*s.height===j,fitsInViewportVertically:K===s.height,fitsInViewportHorizontally:H==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let n=i.bottom-e.y,s=i.right-e.x,o=pr(this._overlayRef.getConfig().minHeight),a=pr(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||o!=null&&o<=n,d=t.fitsInViewportHorizontally||a!=null&&a<=s;return c&&d}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let n=ur(e),s=this._viewportRect,o=Math.max(t.x+n.width-s.width,0),a=Math.max(t.y+n.height-s.height,0),c=Math.max(s.top-i.top-t.y,0),d=Math.max(s.left-i.left-t.x,0),h=0,v=0;return n.width<=s.width?h=d||-o:h=t.x<this._viewportMargin?s.left-i.left-t.x:0,n.height<=s.height?v=c||-a:v=t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:h,y:v},{x:t.x+h,y:t.y+v}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!cs(this._lastScrollVisibility,i)){let n=new vi(t,i);this._positionChanges.next(n)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,n=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${n}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,n=this._isRtl(),s,o,a;if(e.overlayY==="top")o=t.y,s=i.height-o+this._viewportMargin;else if(e.overlayY==="bottom")a=i.height-t.y+this._viewportMargin*2,s=i.height-a+this._viewportMargin;else{let N=Math.min(i.bottom-t.y+i.top,t.y),H=this._lastBoundingBoxSize.height;s=N*2,o=t.y-N,s>H&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-H/2)}let c=e.overlayX==="start"&&!n||e.overlayX==="end"&&n,d=e.overlayX==="end"&&!n||e.overlayX==="start"&&n,h,v,E;if(d)E=i.width-t.x+this._viewportMargin*2,h=t.x-this._viewportMargin;else if(c)v=t.x,h=i.right-t.x;else{let N=Math.min(i.right-t.x+i.left,t.x),H=this._lastBoundingBoxSize.width;h=N*2,v=t.x-N,h>H&&!this._isInitialRender&&!this._growAfterOpen&&(v=t.x-H/2)}return{top:o,left:v,bottom:a,right:E,width:h,height:s}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;n.height=M(i.height),n.top=M(i.top),n.bottom=M(i.bottom),n.width=M(i.width),n.left=M(i.left),n.right=M(i.right),e.overlayX==="center"?n.alignItems="center":n.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?n.justifyContent="center":n.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(n.maxHeight=M(s)),o&&(n.maxWidth=M(o))}this._lastBoundingBoxSize=i,Ae(this._boundingBox.style,n)}_resetBoundingBoxStyles(){Ae(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ae(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},n=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(n){let h=this._viewportRuler.getViewportScrollPosition();Ae(i,this._getExactOverlayY(e,t,h)),Ae(i,this._getExactOverlayX(e,t,h))}else i.position="static";let a="",c=this._getOffset(e,"x"),d=this._getOffset(e,"y");c&&(a+=`translateX(${c}px) `),d&&(a+=`translateY(${d}px)`),i.transform=a.trim(),o.maxHeight&&(n?i.maxHeight=M(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(n?i.maxWidth=M(o.maxWidth):s&&(i.maxWidth="")),Ae(this._pane.style,i)}_getExactOverlayY(t,e,i){let n={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),t.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;n.bottom=`${o-(s.y+this._overlayRect.height)}px`}else n.top=M(s.y);return n}_getExactOverlayX(t,e,i){let n={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=t.overlayX==="end"?"left":"right":o=t.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;n.right=`${a-(s.x+this._overlayRect.width)}px`}else n.left=M(s.x);return n}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(n=>n.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:cr(t,i),isOriginOutsideView:mi(t,i),isOverlayClipped:cr(e,i),isOverlayOutsideView:mi(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,n)=>i-Math.max(n,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&st(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof q)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function Ae(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function pr(r){if(typeof r!="number"&&r!=null){let[t,e]=r.split(ls);return!e||e==="px"?parseFloat(t):null}return r||null}function ur(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}function cs(r,t){return r===t?!0:r.isOriginClipped===t.isOriginClipped&&r.isOriginOutsideView===t.isOriginOutsideView&&r.isOverlayClipped===t.isOverlayClipped&&r.isOverlayOutsideView===t.isOverlayOutsideView}var vr=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}],yr=[{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"},{originX:"start",originY:"top",overlayX:"end",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"end",overlayY:"bottom"}],_r="cdk-global-overlay-wrapper",wi=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(_r),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:n,height:s,maxWidth:o,maxHeight:a}=i,c=(n==="100%"||n==="100vw")&&(!o||o==="100%"||o==="100vw"),d=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),h=this._xPosition,v=this._xOffset,E=this._overlayRef.getConfig().direction==="rtl",N="",H="",K="";c?K="flex-start":h==="center"?(K="center",E?H=v:N=v):E?h==="left"||h==="end"?(K="flex-end",N=v):(h==="right"||h==="start")&&(K="flex-start",H=v):h==="left"||h==="start"?(K="flex-start",N=v):(h==="right"||h==="end")&&(K="flex-end",H=v),t.position=this._cssPosition,t.marginLeft=c?"0":N,t.marginTop=d?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":H,e.justifyContent=K,e.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(_r),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},ds=(()=>{class r{_viewportRuler=l(ot);_document=l(ie);_platform=l(Te);_overlayContainer=l(gr);constructor(){}global(){return new wi}flexibleConnectedTo(e){return new Si(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),$e=(()=>{class r{scrollStrategies=l(ss);_overlayContainer=l(gr);_positionBuilder=l(ds);_keyboardDispatcher=l(os);_injector=l(oe);_ngZone=l(V);_document=l(ie);_directionality=l(ve);_location=l(pn);_outsideClickDispatcher=l(as);_animationsModuleType=l(Yi,{optional:!0});_idGenerator=l(Oe);_renderer=l(ee).createRenderer(null,null);_appRef;_styleLoader=l(nt);constructor(){}create(e){this._styleLoader.load(mr);let i=this._createHostElement(),n=this._createPaneElement(i),s=this._createPortalOutlet(n),o=new ht(e);return o.direction=o.direction||this._directionality.value,new bi(s,i,n,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(mt),this._renderer)}position(){return this._positionBuilder}_createPaneElement(e){let i=this._document.createElement("div");return i.id=this._idGenerator.getId("cdk-overlay-"),i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Ui)),new Vt(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var hs=new W("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let r=l($e);return()=>r.scrollStrategies.reposition()}});function ps(r){return()=>r.scrollStrategies.reposition()}var us={provide:hs,deps:[$e],useFactory:ps},br=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=ae({type:r});static \u0275inj=se({providers:[$e,us],imports:[rt,ar,ti,ti]})}return r})();var Cr=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275dir=G({type:r,selectors:[["","cdkMenuGroup",""]],hostAttrs:["role","group",1,"cdk-menu-group"],exportAs:["cdkMenuGroup"],features:[te([{provide:Kt,useClass:Kt}])]})}return r})(),Di=new W("cdk-menu"),De=function(r){return r[r.nextItem=0]="nextItem",r[r.previousItem=1]="previousItem",r[r.currentItem=2]="currentItem",r}(De||{}),Pe=new W("cdk-menu-stack"),fs={provide:Pe,deps:[[new ft,new Xt,new _t(Pe)]],useFactory:r=>r||new kr},ms=r=>({provide:Pe,deps:[[new ft,new Xt,new _t(Pe)]],useFactory:t=>t||kr.inline(r)}),kr=(()=>{class r{id=l(Oe).getId("cdk-menu-stack-");_elements=[];_close=new g;_empty=new g;_hasFocus=new g;closed=this._close;hasFocus=this._hasFocus.pipe(be(!1),Hi(0),Yt());emptied=this._empty;_inlineMenuOrientation=null;static inline(e){let i=new r;return i._inlineMenuOrientation=e,i}push(e){this._elements.push(e)}close(e,i){let{focusNextOnEmpty:n,focusParentTrigger:s}=ue({},i);if(this._elements.indexOf(e)>=0){let o;do o=this._elements.pop(),this._close.next({item:o,focusParentTrigger:s});while(o!==e);this.isEmpty()&&this._empty.next(n)}}closeSubMenuOf(e){let i=!1;if(this._elements.indexOf(e)>=0)for(i=this.peek()!==e;this.peek()!==e;)this._close.next({item:this._elements.pop()});return i}closeAll(e){let{focusNextOnEmpty:i,focusParentTrigger:n}=ue({},e);if(!this.isEmpty()){for(;!this.isEmpty();){let s=this._elements.pop();s&&this._close.next({item:s,focusParentTrigger:n})}this._empty.next(i)}}isEmpty(){return!this._elements.length}length(){return this._elements.length}peek(){return this._elements[this._elements.length-1]}hasInlineMenu(){return this._inlineMenuOrientation!=null}inlineMenuOrientation(){return this._inlineMenuOrientation}setHasFocus(e){this._hasFocus.next(e)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=C({token:r,factory:r.\u0275fac})}return r})(),Pi=new W("cdk-menu-trigger"),gs=new W("cdk-menu-scroll-strategy",{providedIn:"root",factory:()=>{let r=l($e);return()=>r.scrollStrategies.reposition()}}),vs=(()=>{class r{injector=l(oe);viewContainerRef=l(Z);menuStack=l(Pe);menuScrollStrategy=l(gs);menuPosition;opened=new L;closed=new L;menuTemplateRef;menuData;overlayRef=null;destroyed=new g;stopOutsideClicksListener=_e(this.closed,this.destroyed);childMenu;_menuPortal;_childMenuInjector;ngOnDestroy(){this._destroyOverlay(),this.destroyed.next(),this.destroyed.complete()}isOpen(){return!!this.overlayRef?.hasAttached()}registerChildMenu(e){this.childMenu=e}getMenuContentPortal(){let e=this.menuTemplateRef!==this._menuPortal?.templateRef;return this.menuTemplateRef&&(!this._menuPortal||e)&&(this._menuPortal=new Ge(this.menuTemplateRef,this.viewContainerRef,this.menuData,this._getChildMenuInjector())),this._menuPortal}isElementInsideMenuStack(e){for(let i=e;i;i=i?.parentElement??null)if(i.getAttribute("data-cdk-menu-stack-id")===this.menuStack.id)return!0;return!1}_destroyOverlay(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}_getChildMenuInjector(){return this._childMenuInjector=this._childMenuInjector||oe.create({providers:[{provide:Pi,useValue:this},{provide:Pe,useValue:this.menuStack}],parent:this.injector}),this._childMenuInjector}static \u0275fac=function(i){return new(i||r)};static \u0275dir=G({type:r,hostVars:2,hostBindings:function(i,n){i&2&&Q("aria-controls",n.childMenu==null?null:n.childMenu.id)("data-cdk-menu-stack-id",n.menuStack.id)}})}return r})();var Ri=new W("cdk-menu-aim");function xr(r,t){if(!t.isTrusted)return!1;let e=r.nativeElement,i=t.keyCode;return e.nodeName==="BUTTON"&&!e.disabled?i===13||i===32:e.nodeName==="A"?i===13:!1}var Mi=(()=>{class r extends vs{_elementRef=l(q);_overlay=l($e);_ngZone=l(V);_changeDetectorRef=l(He);_inputModalityDetector=l(Qt);_directionality=l(ve,{optional:!0});_renderer=l(tt);_cleanupMouseenter;_parentMenu=l(Di,{optional:!0});_menuAim=l(Ri,{optional:!0});constructor(){super(),this._setRole(),this._registerCloseHandler(),this._subscribeToMenuStackClosed(),this._subscribeToMouseEnter(),this._subscribeToMenuStackHasFocus(),this._setType()}toggle(){this.isOpen()?this.close():this.open()}open(){!this.isOpen()&&this.menuTemplateRef!=null&&(this.opened.next(),this.overlayRef=this.overlayRef||this._overlay.create(this._getOverlayConfig()),this.overlayRef.attach(this.getMenuContentPortal()),this._changeDetectorRef.markForCheck(),this._subscribeToOutsideClicks())}close(){this.isOpen()&&(this.closed.next(),this.overlayRef.detach(),this._changeDetectorRef.markForCheck()),this._closeSiblingTriggers()}getMenu(){return this.childMenu}ngOnChanges(e){e.menuPosition&&this.overlayRef&&this.overlayRef.updatePositionStrategy(this._getOverlayPositionStrategy())}ngOnDestroy(){this._cleanupMouseenter(),super.ngOnDestroy()}_toggleOnKeydown(e){let i=this._parentMenu?.orientation==="vertical";switch(e.keyCode){case 32:case 13:!ne(e)&&!xr(this._elementRef,e)&&(this.toggle(),this.childMenu?.focusFirstItem("keyboard"));break;case 39:ne(e)||this._parentMenu&&i&&this._directionality?.value!=="rtl"&&(e.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 37:ne(e)||this._parentMenu&&i&&this._directionality?.value==="rtl"&&(e.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 40:case 38:ne(e)||i||(e.preventDefault(),this.open(),e.keyCode===40?this.childMenu?.focusFirstItem("keyboard"):this.childMenu?.focusLastItem("keyboard"));break}}_handleClick(){this.toggle(),this.childMenu?.focusFirstItem("mouse")}_setHasFocus(e){this._parentMenu||this.menuStack.setHasFocus(e)}_subscribeToMouseEnter(){this._cleanupMouseenter=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"mouseenter",()=>{if(this._inputModalityDetector.mostRecentModality!=="touch"&&!this.menuStack.isEmpty()&&!this.isOpen()){let e=()=>this._ngZone.run(()=>{this._closeSiblingTriggers(),this.open()});this._menuAim?this._menuAim.toggle(e):e()}}))}_closeSiblingTriggers(){this._parentMenu?!this.menuStack.closeSubMenuOf(this._parentMenu)&&this.menuStack.peek()!==this._parentMenu&&this.menuStack.closeAll():this.menuStack.closeAll()}_getOverlayConfig(){return new ht({positionStrategy:this._getOverlayPositionStrategy(),scrollStrategy:this.menuScrollStrategy(),direction:this._directionality||void 0})}_getOverlayPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._elementRef).withLockedPosition().withFlexibleDimensions(!1).withPositions(this._getOverlayPositions())}_getOverlayPositions(){return this.menuPosition??(!this._parentMenu||this._parentMenu.orientation==="horizontal"?vr:yr)}_registerCloseHandler(){this._parentMenu||this.menuStack.closed.pipe(A(this.destroyed)).subscribe(({item:e})=>{e===this.childMenu&&this.close()})}_subscribeToOutsideClicks(){this.overlayRef&&this.overlayRef.outsidePointerEvents().pipe(A(this.stopOutsideClicksListener)).subscribe(e=>{let i=de(e),n=this._elementRef.nativeElement;i!==n&&!n.contains(i)&&(this.isElementInsideMenuStack(i)?this._closeSiblingTriggers():this.menuStack.closeAll())})}_subscribeToMenuStackHasFocus(){this._parentMenu||this.menuStack.hasFocus.pipe(A(this.destroyed)).subscribe(e=>{e||this.menuStack.closeAll()})}_subscribeToMenuStackClosed(){this._parentMenu||this.menuStack.closed.subscribe(({focusParentTrigger:e})=>{e&&!this.menuStack.length()&&this._elementRef.nativeElement.focus()})}_setRole(){this._parentMenu||this._elementRef.nativeElement.setAttribute("role","button")}_setType(){let e=this._elementRef.nativeElement;e.nodeName==="BUTTON"&&!e.getAttribute("type")&&e.setAttribute("type","button")}static \u0275fac=function(i){return new(i||r)};static \u0275dir=G({type:r,selectors:[["","cdkMenuTriggerFor",""]],hostAttrs:[1,"cdk-menu-trigger"],hostVars:2,hostBindings:function(i,n){i&1&&m("focusin",function(){return n._setHasFocus(!0)})("focusout",function(){return n._setHasFocus(!1)})("keydown",function(o){return n._toggleOnKeydown(o)})("click",function(){return n._handleClick()}),i&2&&Q("aria-haspopup",n.menuTemplateRef?"menu":null)("aria-expanded",n.menuTemplateRef==null?null:n.isOpen())},inputs:{menuTemplateRef:[0,"cdkMenuTriggerFor","menuTemplateRef"],menuPosition:[0,"cdkMenuPosition","menuPosition"],menuData:[0,"cdkMenuTriggerData","menuData"]},outputs:{opened:"cdkMenuOpened",closed:"cdkMenuClosed"},exportAs:["cdkMenuTriggerFor"],features:[te([{provide:Pi,useExisting:r},fs]),Be,Le]})}return r})(),ys=(()=>{class r{_dir=l(ve,{optional:!0});_elementRef=l(q);_ngZone=l(V);_inputModalityDetector=l(Qt);_renderer=l(tt);_cleanupMouseEnter;_menuAim=l(Ri,{optional:!0});_menuStack=l(Pe);_parentMenu=l(Di,{optional:!0});_menuTrigger=l(Mi,{optional:!0,self:!0});disabled=!1;typeaheadLabel;triggered=new L;get hasMenu(){return this._menuTrigger?.menuTemplateRef!=null}_tabindex=-1;closeOnSpacebarTrigger=!0;destroyed=new g;constructor(){this._setupMouseEnter(),this._setType(),this._isStandaloneItem()&&(this._tabindex=0)}ngOnDestroy(){this._cleanupMouseEnter?.(),this.destroyed.next(),this.destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}trigger(e){let{keepOpen:i}=ue({},e);!this.disabled&&!this.hasMenu&&(this.triggered.next(),i||this._menuStack.closeAll({focusParentTrigger:!0}))}isMenuOpen(){return!!this._menuTrigger?.isOpen()}getMenu(){return this._menuTrigger?.getMenu()}getMenuTrigger(){return this._menuTrigger}getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}_resetTabIndex(){this._isStandaloneItem()||(this._tabindex=-1)}_setTabIndex(e){this.disabled||(!e||!this._menuStack.isEmpty())&&(this._tabindex=0)}_onKeydown(e){switch(e.keyCode){case 32:case 13:if(!ne(e)&&!xr(this._elementRef,e)){let i=this._elementRef.nativeElement.nodeName;i!=="A"&&i!=="BUTTON"&&e.preventDefault(),this.trigger({keepOpen:e.keyCode===32&&!this.closeOnSpacebarTrigger})}break;case 39:ne(e)||this._parentMenu&&this._isParentVertical()&&(this._dir?.value!=="rtl"?this._forwardArrowPressed(e):this._backArrowPressed(e));break;case 37:ne(e)||this._parentMenu&&this._isParentVertical()&&(this._dir?.value!=="rtl"?this._backArrowPressed(e):this._forwardArrowPressed(e));break}}_isStandaloneItem(){return!this._parentMenu}_backArrowPressed(e){let i=this._parentMenu;(this._menuStack.hasInlineMenu()||this._menuStack.length()>1)&&(e.preventDefault(),this._menuStack.close(i,{focusNextOnEmpty:this._menuStack.inlineMenuOrientation()==="horizontal"?De.previousItem:De.currentItem,focusParentTrigger:!0}))}_forwardArrowPressed(e){!this.hasMenu&&this._menuStack.inlineMenuOrientation()==="horizontal"&&(e.preventDefault(),this._menuStack.closeAll({focusNextOnEmpty:De.nextItem,focusParentTrigger:!0}))}_setupMouseEnter(){if(!this._isStandaloneItem()){let e=()=>this._ngZone.run(()=>this._menuStack.closeSubMenuOf(this._parentMenu));this._cleanupMouseEnter=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"mouseenter",()=>{this._inputModalityDetector.mostRecentModality!=="touch"&&!this._menuStack.isEmpty()&&!this.hasMenu&&(this._menuAim?this._menuAim.toggle(e):e())}))}}_isParentVertical(){return this._parentMenu?.orientation==="vertical"}_setType(){let e=this._elementRef.nativeElement;e.nodeName==="BUTTON"&&!e.getAttribute("type")&&e.setAttribute("type","button")}static \u0275fac=function(i){return new(i||r)};static \u0275dir=G({type:r,selectors:[["","cdkMenuItem",""]],hostAttrs:["role","menuitem",1,"cdk-menu-item"],hostVars:2,hostBindings:function(i,n){i&1&&m("blur",function(){return n._resetTabIndex()})("focus",function(){return n._setTabIndex()})("click",function(){return n.trigger()})("keydown",function(o){return n._onKeydown(o)}),i&2&&(Zt("tabindex",n._tabindex),Q("aria-disabled",n.disabled||null))},inputs:{disabled:[2,"cdkMenuItemDisabled","disabled",ge],typeaheadLabel:[0,"cdkMenuitemTypeaheadLabel","typeaheadLabel"]},outputs:{triggered:"cdkMenuItemTriggered"},exportAs:["cdkMenuItem"]})}return r})(),xi=class{_renderer;_items;_eventCleanups;_itemsSubscription;entered=new g;exited=new g;activeElement;previousElement;constructor(t,e){this._renderer=t,this._items=e,this._bindEvents(),this.entered.subscribe(i=>this.activeElement=i),this.exited.subscribe(()=>{this.previousElement=this.activeElement,this.activeElement=void 0})}destroy(){this._cleanupEvents(),this._itemsSubscription?.unsubscribe()}_bindEvents(){this._itemsSubscription=this._items.changes.pipe(be(this._items)).subscribe(()=>{this._cleanupEvents(),this._eventCleanups=[],this._items.forEach(t=>{let e=t._elementRef.nativeElement;this._eventCleanups.push(this._renderer.listen(e,"mouseenter",()=>{this.entered.next(t)}),this._renderer.listen(e,"mouseout",()=>{this.exited.next(t)}))})})}_cleanupEvents(){this._eventCleanups?.forEach(t=>t()),this._eventCleanups=void 0}},bs=(()=>{class r extends Cr{_focusMonitor=l(Rn);ngZone=l(V);_renderer=l(tt);nativeElement=l(q).nativeElement;menuStack=l(Pe);menuAim=l(Ri,{optional:!0,self:!0});dir=l(ve,{optional:!0});id=l(Oe).getId("cdk-menu-");items;orientation="vertical";isInline=!1;keyManager;destroyed=new g;triggerItem;pointerTracker;_menuStackHasFocus=w(!1);_tabIndexSignal=k(()=>{let e=this._menuStackHasFocus()?-1:0;return this.isInline?e:null});ngAfterContentInit(){this.isInline||this.menuStack.push(this),this._setKeyManager(),this._handleFocus(),this._subscribeToMenuStackHasFocus(),this._subscribeToMenuOpen(),this._subscribeToMenuStackClosed(),this._setUpPointerTracker()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this.nativeElement),this.keyManager?.destroy(),this.destroyed.next(),this.destroyed.complete(),this.pointerTracker?.destroy()}focusFirstItem(e="program"){this.keyManager.setFocusOrigin(e),this.keyManager.setFirstItemActive()}focusLastItem(e="program"){this.keyManager.setFocusOrigin(e),this.keyManager.setLastItemActive()}_getTabIndex(){return this._tabIndexSignal()}closeOpenMenu(e,i){let{focusParentTrigger:n}=ue({},i),s=this.keyManager,o=this.triggerItem;e===o?.getMenuTrigger()?.getMenu()&&(o?.getMenuTrigger()?.close(),n&&(o?s.setActiveItem(o):s.setFirstItemActive()))}_setKeyManager(){this.keyManager=new Mn(this.items).withWrap().withTypeAhead().withHomeAndEnd(),this.orientation==="horizontal"?this.keyManager.withHorizontalOrientation(this.dir?.value||"ltr"):this.keyManager.withVerticalOrientation()}_subscribeToMenuOpen(){let e=_e(this.items.changes,this.destroyed);this.items.changes.pipe(be(this.items),Vi(i=>i.filter(n=>n.hasMenu).map(n=>n.getMenuTrigger().opened.pipe(Wi(n),A(e)))),Ni(),Qe(i=>(this.triggerItem=i,i.getMenuTrigger().closed)),A(this.destroyed)).subscribe(()=>this.triggerItem=void 0)}_subscribeToMenuStackClosed(){this.menuStack.closed.pipe(A(this.destroyed)).subscribe(({item:e,focusParentTrigger:i})=>this.closeOpenMenu(e,{focusParentTrigger:i}))}_subscribeToMenuStackHasFocus(){this.isInline&&this.menuStack.hasFocus.pipe(A(this.destroyed)).subscribe(e=>{this._menuStackHasFocus.set(e)})}_setUpPointerTracker(){this.menuAim&&(this.ngZone.runOutsideAngular(()=>{this.pointerTracker=new xi(this._renderer,this.items)}),this.menuAim.initialize(this,this.pointerTracker))}_handleFocus(){this._focusMonitor.monitor(this.nativeElement,!1).pipe(A(this.destroyed)).subscribe(e=>{e!==null&&e!=="mouse"&&this.focusFirstItem(e)})}static \u0275fac=(()=>{let e;return function(n){return(e||(e=Ve(r)))(n||r)}})();static \u0275dir=G({type:r,contentQueries:function(i,n,s){if(i&1&&Ji(s,ys,5),i&2){let o;Gt(o=$t())&&(n.items=o)}},hostAttrs:["role","menu"],hostVars:4,hostBindings:function(i,n){i&1&&m("focusin",function(){return n.menuStack.setHasFocus(!0)})("focusout",function(){return n.menuStack.setHasFocus(!1)}),i&2&&(Zt("tabindex",n._getTabIndex())("id",n.id),Q("aria-orientation",n.orientation)("data-cdk-menu-stack-id",n.menuStack.id))},inputs:{id:"id"},features:[Be]})}return r})(),Dr=(()=>{class r extends bs{_parentTrigger=l(Pi,{optional:!0});closed=new L;orientation="vertical";isInline=!this._parentTrigger;constructor(){super(),this.destroyed.subscribe(this.closed),this._parentTrigger?.registerChildMenu(this)}ngAfterContentInit(){super.ngAfterContentInit(),this._subscribeToMenuStackEmptied()}ngOnDestroy(){super.ngOnDestroy(),this.closed.complete()}_handleKeyEvent(e){let i=this.keyManager;switch(e.keyCode){case 37:case 39:ne(e)||(e.preventDefault(),i.setFocusOrigin("keyboard"),i.onKeydown(e));break;case 27:ne(e)||(e.preventDefault(),this.menuStack.close(this,{focusNextOnEmpty:De.currentItem,focusParentTrigger:!0}));break;case 9:ne(e,"altKey","metaKey","ctrlKey")||this.menuStack.closeAll({focusParentTrigger:!0});break;default:i.onKeydown(e)}}_toggleMenuFocus(e){let i=this.keyManager;switch(e){case De.nextItem:i.setFocusOrigin("keyboard"),i.setNextItemActive();break;case De.previousItem:i.setFocusOrigin("keyboard"),i.setPreviousItemActive();break;case De.currentItem:i.activeItem&&(i.setFocusOrigin("keyboard"),i.setActiveItem(i.activeItem));break}}_subscribeToMenuStackEmptied(){this.menuStack.emptied.pipe(A(this.destroyed)).subscribe(e=>this._toggleMenuFocus(e))}static \u0275fac=function(i){return new(i||r)};static \u0275dir=G({type:r,selectors:[["","cdkMenu",""]],hostAttrs:["role","menu",1,"cdk-menu"],hostVars:2,hostBindings:function(i,n){i&1&&m("keydown",function(o){return n._handleKeyEvent(o)}),i&2&&$("cdk-menu-inline",n.isInline)},outputs:{closed:"closed"},exportAs:["cdkMenu"],features:[te([{provide:Cr,useExisting:r},{provide:Di,useExisting:r},ms("vertical")]),Be]})}return r})();var Pr=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=ae({type:r});static \u0275inj=se({imports:[br]})}return r})();var ws=r=>({value:r});function Cs(r,t){if(r&1){let e=P();p(0,"div",14)(1,"div",15)(2,"div",16)(3,"shared-button",17),m("clicked",function(){y(e);let n=f(3).$index,s=f(2);return b(s.speachItineraryResume(n))}),_()()(),z(4,"hr"),p(5,"div",18)(6,"p",19),x(7),_()()()}if(r&2){let e=f(3).$index,i=f(2);u(3),S("icon",i.getIconByTravelMode(e)),u(4),T(i.dataItinerariesResume()[e])}}function ks(r,t){if(r&1&&(p(0,"div",11),z(1,"shared-button",13),I(2,Cs,8,2,"ng-template",null,0,Ut),_()),r&2){let e=it(3);u(),S("cdkMenuTriggerFor",e)}}function xs(r,t){if(r&1&&I(0,ks,4,1,"div",11),r&2){let e=f(),i=e.$index,n=e.$count;B(i!==n-1?0:-1)}}function Ds(r,t){if(r&1){let e=P();z(0,"hr"),p(1,"div",18)(2,"p",19),x(3),R(4,"appTranslate"),_()(),p(5,"div",15)(6,"div",16)(7,"shared-button",22),R(8,"appTranslate"),m("clicked",function(){y(e);let n=f(3).$index,s=f(2);return b(s.setTravelMode("driving",n))}),_()(),p(9,"div",16)(10,"shared-button",22),R(11,"appTranslate"),m("clicked",function(){y(e);let n=f(3).$index,s=f(2);return b(s.setTravelMode("driving-traffic",n))}),_()()(),p(12,"div",18)(13,"div",16)(14,"shared-button",22),R(15,"appTranslate"),m("clicked",function(){y(e);let n=f(3).$index,s=f(2);return b(s.setTravelMode("walking",n))}),_()(),p(16,"div",16)(17,"shared-button",22),R(18,"appTranslate"),m("clicked",function(){y(e);let n=f(3).$index,s=f(2);return b(s.setTravelMode("cycling",n))}),_()()()}if(r&2){let e=f(3),i=e.$implicit,n=e.$index,s=f(2);u(3),T(gt(4,13,"i18n.features.mapbox.nextPlace",an(24,ws,s.places()[n+1].name))),u(4),S("icon",s.getIconByTravelMode("driving"))("variant",s.getVariant("driving",i))("title",O(8,16,"i18n.features.mapbox.driving")),u(3),S("icon",s.getIconByTravelMode("driving-traffic"))("variant",s.getVariant("driving-traffic",i))("title",O(11,18,"i18n.features.mapbox.drivingTraffic")),u(4),S("icon",s.getIconByTravelMode("walking"))("variant",s.getVariant("walking",i))("title",O(15,20,"i18n.features.mapbox.walking")),u(3),S("icon",s.getIconByTravelMode("cycling"))("variant",s.getVariant("cycling",i))("title",O(18,22,"i18n.features.mapbox.cycling"))}}function Ps(r,t){if(r&1){let e=P();p(0,"div",14)(1,"div",15)(2,"div",16)(3,"shared-button",20),m("clicked",function(){y(e);let n=f(2).$implicit,s=f(2);return b(s.openPlace(n))}),_()(),p(4,"div",16)(5,"shared-button",21),m("clicked",function(){y(e);let n=f(2).$implicit,s=f(2);return b(s.removePlace(n))}),_()()(),I(6,Ds,19,26),_()}if(r&2){let e=f(2),i=e.$index,n=e.$count;u(5),S("outline",!0),u(),B(i!==n-1?6:-1)}}function Rs(r,t){if(r&1&&(p(0,"div",11),z(1,"shared-button",13),I(2,Ps,7,2,"ng-template",null,0,Ut),_()),r&2){let e=it(3);u(),S("cdkMenuTriggerFor",e)}}function Ms(r,t){if(r&1){let e=P();p(0,"div",24),m("click",function(){let n=y(e).$implicit,s=f(4);return b(s.goToStepLocation(n))}),p(1,"div",25)(2,"div",26),z(3,"i",27),_(),p(4,"div",28),x(5),_()()()}if(r&2){let e=t.$implicit,i=f(4);u(3),S("ngClass",i.getIcon(e.maneuver)),u(2),T(e.instruction)}}function Es(r,t){if(r&1&&fe(0,Ms,6,2,"div",23,Me),r&2){let e=f().$implicit;me(e.itinerary.steps)}}function Is(r,t){if(r&1){let e=P();p(0,"li",7),m("cdkDragStarted",function(n){y(e);let s=f(2);return b(s.dragStart(n))}),p(1,"div",8)(2,"div",9),z(3,"i",10),x(4),_(),I(5,xs,1,1)(6,Rs,4,1,"div",11),_(),p(7,"div",12),I(8,Es,2,0),_()()}if(r&2){let e=t.$implicit,i=t.$index,n=t.$count,s=f(2);u(3),$("bi-geo-alt-fill",i===n-1),S("ngClass",i===n-1?"":"bi-"+(i+1)+"-circle"),u(),ze("",e.name," "),u(),B(s.places()[0].itinerary?5:6),u(3),B(e.itinerary?8:-1)}}function Ts(r,t){if(r&1){let e=P();p(0,"shared-button",29),m("clicked",function(){y(e);let n=f(2);return b(n.removeItinerarie())}),_()}r&2&&S("outline",!0)}function Os(r,t){if(r&1){let e=P();p(0,"shared-button",30),R(1,"appTranslate"),m("clicked",function(){y(e);let n=f(2);return b(n.initItinerarie())}),_()}if(r&2){let e=f(2);S("disabled",e.places().length<2)("label",O(1,2,"i18n.features.mapbox.getToAPlace"))}}function Fs(r,t){if(r&1){let e=P();p(0,"div",1)(1,"ul",2),m("cdkDropListDropped",function(n){y(e);let s=f();return b(s.drop(n))}),fe(2,Is,9,6,"li",3,Me),_(),p(4,"div",4),I(5,Ts,1,1,"shared-button",5)(6,Os,2,4,"shared-button",6),_()()}if(r&2){let e=f();u(2),me(e.places()),u(3),B(e.places()[0].itinerary?5:6)}}var Bt=class r{_appTranslateService=l(je);_destroyRef=l(Ne);_viewContainerRef=l(Z);_apiClient=l(We);_itinerariesService=l(pe);_mapsPageComponent=l(Ue);_mapsService=l(X);_speechService=l(Ye);places=k(()=>this._itinerariesService.places());_dataItinerariesResume=w([]);dataItinerariesResume=dn({source:this._dataItinerariesResume,computation:t=>t.map(({index:e,itinerary:i,nextPlace:n})=>{let s=Math.floor(i.duration.minutes/60),o=Math.round(i.duration.minutes%60),{meters:a,kilometers:c}=i.distance,d=[this._appTranslateService.getValue("i18n.common.time.hours",{hours:s}),this._appTranslateService.getValue("i18n.common.time.minutes",{minutes:o})].join(" "),h=a<1e3?this._appTranslateService.getValue("i18n.common.distance.meters",{meters:Math.round(a)}):this._appTranslateService.getValue("i18n.common.distance.kilometers",{kilometers:Math.round(c)});return this._appTranslateService.getValue("i18n.features.mapbox.itineraryResume",{time:d,distance:h,place:n})})});ngOnInit(){}placeOnTheItinerary(t){return this._itinerariesService.placeOnTheItinerary(t)}drop({previousIndex:t,currentIndex:e}){this._itinerariesService.movePlace(t,e)}dragStart(t){this.removeItinerarie()}openPlace(t){this._mapsService.addMarker(t,this._viewContainerRef),this._mapsService.flyTo(t.coordinates)}removePlace(t){this._itinerariesService.removePlace(t)}initItinerarie(){let t=this.places();t.length<2||(this._mapsPageComponent.setIsCollapsed(!0),this._mapsService.removeOldMarkers(),qe(...t).pipe(vt(this._destroyRef),zi((e,i)=>i===t.length-1?qe(null):this._apiClient.getItinerary(e.travelMode||this._itinerariesService.defaultTravelMode,e.coordinates,t[i+1].coordinates).pipe(ut(n=>{this._itinerariesService.updateItinerariesOfPlace(i,n),this._mapsService.drawItinerary(n,i)})))).subscribe({complete:()=>{this.setItinerariesResume();let e=t[0];for(let i of this.places())this._mapsService.addMarker(i,this._viewContainerRef,!1);e?.itinerary?.steps[0]&&this.goToStepLocation(e.itinerary.steps[0],!0)},error:()=>{this.removeItinerarie()}}))}removeItinerarie(){this._itinerariesService.removeItinerariesOfPlaces()}goToStepLocation({location:t,instruction:e},i=!1){let n=this.dataItinerariesResume()[0]+`
`;this._speechService.speak((i?n:"")+e),this._mapsService.flyTo(t,18)}speachItineraryResume(t){this._speechService.speak(this.dataItinerariesResume()[t])}getIcon(t){let e="";switch(t){case"turnLeft":e="arrow-90deg-left";break;case"turnRight":e="arrow-90deg-right";break;default:e="arrow-up"}return"fs-6 bi bi-"+e}setItinerariesResume(){let t=this.places(),e=[];t.forEach((i,n)=>{if(this.shouldSkipPlace(i,n,t))return;let s=t[n+1].name;i.itinerary&&e.push({index:n,itinerary:i.itinerary,nextPlace:s})}),this._dataItinerariesResume.set(e)}shouldSkipPlace(t,e,i){return!t.itinerary||e===i.length-1}getIconByTravelMode(t){switch(typeof t=="number"?this.places()[t].travelMode:t){case"driving":return"car-front";case"driving-traffic":return"stoplights";case"walking":return"person-walking";case"cycling":return"bicycle";default:return"question-diamond"}}getVariant(t,e){return e?.travelMode===t?"primary":"secondary"}setTravelMode(t,e){this._itinerariesService.updateTravelModeOfPlace(e,t)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["features-mapbox-itineraries"]],features:[te([_n])],decls:1,vars:1,consts:[["menu",""],[1,"card"],["cdkDropList","",1,"list-group","list-group-flush","overflow-y-auto","w-rem-18","mh-rem-20",3,"cdkDropListDropped"],["cdkDrag","","cdkDragPreviewClass","list-group-item",1,"list-group-item"],[1,"card-footer"],["icon","trash","variant","danger",3,"outline"],["icon","arrow-90deg-right",3,"disabled","label"],["cdkDrag","","cdkDragPreviewClass","list-group-item",1,"list-group-item",3,"cdkDragStarted"],[1,"row","p-0","align-items-center"],[1,"col","ps-0","overflow-x-auto","text-pre"],[1,"bi","me-2",3,"ngClass"],[1,"col-2","position-relative"],[1,"container-itinerary"],["icon","three-dots-vertical","variant","link","additionalClasses","w-auto",3,"cdkMenuTriggerFor"],["cdkMenu","",1,"bg-body","border","rounded","p-2","w-rem-15"],[1,"row"],[1,"col"],["variant","primary",3,"clicked","icon"],[1,"row","pt-2"],[1,""],["icon","eye-fill","variant","info",1,"dropdown-item",3,"clicked"],["icon","trash","variant","danger",1,"dropdown-item",3,"clicked","outline"],[3,"clicked","icon","variant","title"],[1,"card-body","ist-group-item","list-group-item-action","cursor-pointer"],[1,"card-body","ist-group-item","list-group-item-action","cursor-pointer",3,"click"],[1,"row","pe-0"],[1,"col-1","ps-0"],[3,"ngClass"],[1,"col","pe-0"],["icon","trash","variant","danger",3,"clicked","outline"],["icon","arrow-90deg-right",3,"clicked","disabled","label"]],template:function(e,i){e&1&&I(0,Fs,7,1,"div",1),e&2&&B(i.places().length?0:-1)},dependencies:[le,un,Pr,Dr,Mi,or,sr,ce,we],styles:["[_nghost-%COMP%]{position:absolute;top:0;right:0;padding:10px;z-index:1}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:1}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}shared-button[aria-expanded=true][_ngcontent-%COMP%] ~ .dropdown-menu[_ngcontent-%COMP%]{display:block}"]})};var As=["map"];function Ls(r,t){if(r&1&&(p(0,"span",7),x(1),_()),r&2){let e=f();u(),T(e.currentLngLat().lat+", "+e.currentLngLat().lng)}}var Ue=class r{_mapsService=l(X);_itinerariesService=l(pe);_divMap=Zi.required("map");currentLngLat=k(()=>this._mapsService.currentLngLat());showCoords=k(()=>this._mapsService.showCoords());ngAfterViewInit(){let t=this._divMap();if(!t)throw"El elemento HTML no fue encontrado";this._mapsService.createMap(t)}isCollapsed=Gi(!1);toggleCollapse(){this._itinerariesService.removeItinerariesOfPlaces(),this.isCollapsed.update(t=>!t)}setIsCollapsed(t){this.isCollapsed.set(t)}ngOnDestroy(){this._mapsService.destroyMap()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["features-mapbox-maps-page"]],viewQuery:function(e,i){e&1&&en(i._divMap,As,5),e&2&&tn()},inputs:{isCollapsed:[1,"isCollapsed"]},outputs:{isCollapsed:"isCollapsedChange"},decls:10,vars:8,consts:[["map",""],[1,"position-relative","border"],[1,"divMap"],[1,"side-menu","position-absolute","w-50","collapse","top-0","hide",3,"ngbCollapseChange","ngbCollapse","animation","horizontal"],[3,"onOpenPlace"],["icon","x","variant","","additionalClasses","p-0 border-0","data-bs-toggle","collapse",1,"w-auto",3,"clicked","fontSizeIcon"],["icon","list","variant","","additionalClasses","p-0 border-0","data-bs-toggle","collapse",3,"clicked","fontSizeIcon"],[1,"lat-long-info","p-2","bg-dark","border","rounded","m-1","text-light","opacity-50","opacity-hover-100"]],template:function(e,i){if(e&1){let n=P();p(0,"div",1),z(1,"div",2,0),p(3,"div",3),on("ngbCollapseChange",function(o){return y(n),sn(i.isCollapsed,o)||(i.isCollapsed=o),b(o)}),p(4,"features-mapbox-side-menu",4),m("onOpenPlace",function(){return y(n),b(i.isCollapsed())}),p(5,"shared-button",5),m("clicked",function(){return y(n),b(i.toggleCollapse())}),_()()(),p(6,"features-mapbox-maps-searcher")(7,"shared-button",6),m("clicked",function(){return y(n),b(i.toggleCollapse())}),_()(),z(8,"features-mapbox-itineraries"),I(9,Ls,2,1,"span",7),_()}e&2&&(u(3),rn("ngbCollapse",i.isCollapsed),S("animation",!0)("horizontal",!0),u(2),S("fontSizeIcon",3),Q("aria-expanded",i.isCollapsed()?"false":"true"),u(2),S("fontSizeIcon",5),Q("aria-expanded",i.isCollapsed()?"false":"true"),u(2),B(i.showCoords()?9:-1))},dependencies:[le,ce,gn,mn,It,Pt,Bt],styles:[".divMap[_ngcontent-%COMP%], .side-menu[_ngcontent-%COMP%]{height:60vh}.side-menu[_ngcontent-%COMP%]{z-index:3;background:var(--bs-body-bg)}.lat-long-info[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0}"]})};var Ei=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["features-mapbox-home-page"]],decls:2,vars:0,template:function(e,i){e&1&&z(0,"core-change-language")(1,"features-mapbox-maps-page")},dependencies:[Ue,En],encapsulation:2})};export{Ei as default};
