@if (form()) {
  @let formInstance = form()!;
  <form [ngClass]="classes()" [class.was-validated]="false" novalidate [formGroup]="formInstance" (ngSubmit)="onSubmit()">
    @for (key of formKeys; track $index) {
       <ng-container patoFormControlInjectorDirective [patoFormComponent]="this" [id]="id() + '_' + key" [data]="data()[key]"  [componentFormField]="formFieldComponent()" [form]="formInstance" [control]="formInstance.controls[key]" ></ng-container>
    }
    <ng-container *ngTemplateOutlet="finalFormTemplate()"></ng-container>
  </form>
  {{ formInstance.touched }}
}
